<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Midterm Notes</title><style>
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, YuMincho, "Yu Mincho", "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC", "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC', 'Noto Sans CJK KR'; }

.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC', 'Noto Sans Mono CJK KR'; }

.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="758064c6-eae2-42f5-a41a-8bdf52e93597" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/gradients_5.png" style="object-position:center 40%"/><h1 class="page-title">Midterm Notes</h1></header><div class="page-body"><hr id="47b7f83d-bc54-4790-8292-d178003ee9cf"/><h2 id="1d3d9163-44dc-4ba7-a709-a6454a811c61" class=""><mark class="highlight-pink">0. Introduction</mark></h2><hr id="a2044c62-619c-4087-9fe3-18eca28e6655"/><ul id="fbc49713-2280-47d1-8661-8e05a1d1c80c" class="bulleted-list"><li><mark class="highlight-orange"><strong>Information Retrieval (IR)</strong></mark> is <mark class="highlight-yellow">finding material</mark> (usually documents) of an <mark class="highlight-yellow">unstructured</mark> (or semi-structured) nature (usually text) that satisfies an <mark class="highlight-yellow">information need</mark> from within <mark class="highlight-yellow">large collections</mark>.</li></ul><ul id="3cdeada9-dbe5-4ede-b1bb-acf074e54aeb" class="bulleted-list"><li><mark class="highlight-orange"><strong>Document:</strong></mark><mark class="highlight-orange"> </mark>a unit decided to build a retrieval system over.</li></ul><ul id="1f13e4a3-169d-4575-bcfb-692403dd8d38" class="bulleted-list"><li><mark class="highlight-orange"><strong>textual:</strong></mark><mark class="highlight-orange"> </mark>a sequence of words, punctuation, etc that express ideas about some topic in a natural language.</li></ul><ul id="6c019871-4d3a-48f3-8ff1-7aecbac560ff" class="bulleted-list"><li><mark class="highlight-orange"><strong>Corpus or collection:</strong></mark><mark class="highlight-orange"> </mark>a set of documents.</li></ul><ul id="927f5341-9873-45dd-aef8-65d34b732304" class="bulleted-list"><li><mark class="highlight-orange"><strong>Information need:</strong></mark><mark class="highlight-orange"> </mark>information required by the user about some topics.</li></ul><ul id="b581bf40-e48f-4051-951d-781051bfa0cf" class="bulleted-list"><li><mark class="highlight-orange"><strong>Query:</strong></mark> <mark class="highlight-yellow_background">formulation of the information need.</mark></li></ul><ul id="8238abe8-f95a-4070-80dc-cd50fb58d0de" class="bulleted-list"><li><mark class="highlight-orange"><strong>Search overhead:</strong></mark><mark class="highlight-orange"> </mark>Time spent in all steps leading to the reading of items containing the needed information.</li></ul><ul id="898c254a-1551-415b-afd5-1f51c6e8bd21" class="bulleted-list"><li><strong><mark class="highlight-orange">Index: </mark></strong>data structure built on the text to speed up the searches.</li></ul><ul id="390d95d9-0778-4d21-951f-f51489fe2a69" class="bulleted-list"><li>Indexing depends on the <mark class="highlight-yellow_background">query language</mark> and <mark class="highlight-yellow_background">IR model.</mark></li></ul><ul id="4cd07413-c873-45ff-acb9-716fae35aeee" class="bulleted-list"><li><mark class="highlight-orange"><strong>Term (index unit):</strong></mark> A word, phrase, and other groups of symbols used for retrieval.</li></ul><ul id="6447cb81-e2d0-4ca3-92c6-702e4d3b1538" class="bulleted-list"><li><strong><mark class="highlight-orange">Structured vs. unstructured docs:</mark></strong><ul id="4b389358-ab01-4cec-b5a9-b6ac7dcce541" class="bulleted-list"><li><strong>Unstructured text (free text):</strong> a continuous sequence of tokens.</li></ul><ul id="3a30e9e2-43e1-4310-ace8-a26ed1d9ffe9" class="bulleted-list"><li><strong>Structured text (fielded text):</strong><mark class="highlight-orange"> </mark>text is broken into fields that are distinguished by tags or other markup.</li></ul><ul id="8528b9e1-4106-4393-b6b1-e7157a5b885d" class="bulleted-list"><li><strong>Semi-structured text: </strong>e.g. web page.</li></ul></li></ul><ul id="e81a5d00-476e-40cc-944c-28a0584b8940" class="bulleted-list"><li><mark class="highlight-orange"><strong>Data retrieval:</strong></mark><mark class="highlight-orange"> </mark>which items contain a set of keywords? 
well defined structure and semantics,  
a single erroneous object implies failure!</li></ul><ul id="f0bc90ba-0136-4d5a-b0fa-86701efe9584" class="bulleted-list"><li><strong>Information retrieval:</strong> information about a subject, semantics is frequently loose, small errors are tolerated.</li></ul><h3 id="0ff469c3-1112-4220-8766-ddcda5a98c65" class=""><mark class="highlight-red">Precision</mark></h3><p id="d952b234-749d-4d68-a79c-a75b5949244d" class="">Fraction of retrieved docs that are relevant to user’s information need.</p><figure id="bbd8ac40-39be-4689-a4f7-ea65322dbd15" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mfrac><mrow><mi>R</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>d</mi><mo>∩</mo><mi>R</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>v</mi><mi>a</mi><mi>n</mi><mi>t</mi></mrow><mrow><mi>R</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>d</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>t</mi><mi>p</mi></mrow><mrow><mi>t</mi><mi>p</mi><mo>+</mo><mi>f</mi><mi>p</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">Precision = \frac{Retrieved \cap Relevant}{Retrieved} = \frac{tp}{tp + fp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.17252em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.29208em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">p</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><h3 id="5ef417c7-a8ad-4e31-85eb-7c3b817aa197" class=""><mark class="highlight-red">Recall</mark></h3><p id="5048d2b9-b88a-4702-83e2-b195a747143e" class="">Fraction of relevant docs that are retrieved</p><figure id="f0b5ea37-7a7b-4ece-814b-42a99c1a6e31" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mfrac><mrow><mi>R</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>d</mi><mo>∩</mo><mi>R</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>v</mi><mi>a</mi><mi>n</mi><mi>t</mi></mrow><mrow><mi>R</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>v</mi><mi>a</mi><mi>n</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>t</mi><mi>p</mi></mrow><mrow><mi>t</mi><mi>p</mi><mo>+</mo><mi>f</mi><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">Precision = \frac{Retrieved \cap Relevant}{Relevant} = \frac{tp}{tp + fn}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.17252em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.29208em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><hr id="d43d501d-0e51-465b-85d0-0924717a085b"/><h2 id="8cbf4638-61e5-4ce5-88e6-dedd942ef9a2" class=""><mark class="highlight-pink">1. Boolean Retrieval</mark></h2><hr id="efa7abac-d4df-44bf-89ed-6e873695a5ed"/><ul id="8c0af1ad-e061-442a-94a3-cfe5affc441b" class="bulleted-list"><li>Views each doc as a set of words, term-incidence matrix is sufficient.</li></ul><ul id="96848a2c-0048-4990-bcc3-8ade59220726" class="bulleted-list"><li>Retrieved docs are not ranked, It is precise or exact match.</li></ul><ul id="69f6c425-2a0e-43d4-8294-cb831179b3d9" class="bulleted-list"><li>Matrix is extremely sparse, so a minimum of 99.8% of the cells are zero.</li></ul><h3 id="298a587f-da0d-4827-a7a3-ac11ff14f568" class=""><mark class="highlight-red">Inverted Index</mark></h3><ul id="3db5554e-b3ff-471d-b5ae-e17a933fa0fc" class="bulleted-list"><li>For each term t, store a <mark class="highlight-yellow">sorted</mark> list of <strong>docIDs</strong> that contain t.</li></ul><ul id="e364dfc0-de25-4da8-aee2-673a7039a4dd" class="bulleted-list"><li><mark class="highlight-orange"><strong>Indexer steps:</strong></mark><ol id="a1cbc425-f510-4d66-b0dc-024bdc2cd43f" class="numbered-list" start="1"><li>Sequence of (Modified token, Document ID) pairs.</li></ol><ol id="2bdde3bd-3cf2-42e6-95be-0014e83b80d9" class="numbered-list" start="2"><li>Sort by terms, and then docID. (core indexing step)</li></ol><ol id="79583599-78b1-4139-a745-57a99875a2fd" class="numbered-list" start="3"><li>Multiple term entries in a single doc are merged.</li></ol><ol id="adcc1223-7c4a-4d13-82dd-8af30304fbf9" class="numbered-list" start="4"><li>Split into Dictionary and Postings.</li></ol><ol id="4b2ae62e-a6a9-4386-9c36-986d8004a8a3" class="numbered-list" start="5"><li>Document frequency information is added.</li></ol></li></ul><ul id="93800cd1-3b8b-40e7-88a2-320088914967" class="bulleted-list"><li><mark class="highlight-orange"><strong>The merge:</strong></mark> Walk through the two postings simultaneously. If list lengths are x and y, merge takes <code>O(x + y)</code> operations.</li></ul><figure id="e8bfeab1-55e6-401c-8f0a-c1d981140b3b" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_12.49.52_PM.png"><img style="width:384px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_12.49.52_PM.png"/></a></figure><ul id="595c3b39-8ede-4fa1-91e6-9e2ba9114721" class="bulleted-list"><li><strong>AND:</strong> worst case time <code>min{x , y}</code>.</li></ul><ul id="b83ddc90-403f-42cf-a77f-a43357d159d3" class="bulleted-list"><li><strong>OR:</strong> worst case time <code>O(x + y)</code>.</li></ul><ul id="9cd71777-69ab-44dd-8d89-62236ca0ed3c" class="bulleted-list"><li><mark class="highlight-orange"><strong>Query optimization: </strong></mark>a query that is an AND of 𝑛 terms, <mark class="highlight-yellow">process in order of increasing freq.
</mark>Estimate the size of each OR by the sum of its doc freq’s (conservative). Process in increasing order of OR sizes.</li></ul><ul id="2071218e-72c4-4c25-960b-ee0d4c9cf6a8" class="bulleted-list"><li>AND, OR as opposite extremes in a precision/recall tradeoff:<p id="992dc31c-6aac-4ab4-917b-34b951fefa56" class=""><mark class="highlight-yellow"><strong>AND:</strong></mark><mark class="highlight-yellow"> </mark>high precision, low recall.
<mark class="highlight-yellow"><strong>OR:</strong></mark><strong> </strong>high recall, low precision.</p></li></ul><h3 id="86b0a465-6f78-4fb8-9e74-edc3fce71745" class=""><mark class="highlight-red">Phrase Queries</mark></h3><ul id="ae2a662a-8a31-4e1c-8da3-92d206e15b95" class="bulleted-list"><li><mark class="highlight-orange"><strong>Phrase query:</strong></mark> find places where all the words appear in sequence.</li></ul><ul id="c2a7470f-3e00-4736-80ea-fd2dc6c31635" class="bulleted-list"><li><mark class="highlight-orange"><strong>Proximity query:</strong></mark> to find places where all the words close enough.</li></ul><ul id="c13c16ab-65b4-4989-899e-bdb4ac50d0e8" class="bulleted-list"><li>It is not sufficient to store only the doc IDs in the posting lists.</li></ul><h3 id="6ecd6bb9-8342-4643-9d22-66650dca87df" class=""><mark class="highlight-red">Indexing Bi-words</mark></h3><ul id="2bd3f77c-8510-4a6b-b822-522a11c77498" class="bulleted-list"><li>Index every consecutive pair of terms in the text as a phrase.</li></ul><ul id="e2a3a570-68a7-47e8-ac6a-2598c3af9815" class="bulleted-list"><li>Two-word phrase query-processing is now immediate.</li></ul><ul id="dabf1238-0fc5-4e80-a551-b77cfbbd557a" class="bulleted-list"><li>Longer phrases are processed as conjunction of bi-words.</li></ul><ul id="cad1fa08-6426-493a-bb01-01197ec7bcc2" class="bulleted-list"><li><mark class="highlight-red">Issues:</mark><ul id="730e21a0-3d82-49e4-b375-8745579ad3bd" class="bulleted-list"><li>False positives (for phrases with more than two words)</li></ul><ul id="289d912c-70dd-4d5c-9a36-837d42944c0f" class="bulleted-list"><li>Index blowup due to bigger dictionary</li></ul><ul id="ea878394-194e-49f7-89a4-d657bf6db287" class="bulleted-list"><li>Bi-word indexes are not the standard solution (for all bi-words) but can be part of a compound strategy</li></ul></li></ul><h3 id="97db461a-c0f7-45af-88c8-02097e1b8847" class=""><mark class="highlight-red">Positional Index</mark></h3><ul id="2d1877fd-eaea-4182-87cc-f0618eff15da" class="bulleted-list"><li>In the postings, store for each term the position(s) in which tokens of it appear:</li></ul><figure id="68412676-f2dc-481a-b9f4-273f5fe8c9f7" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_5.17.41_PM.png"><img style="width:288px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_5.17.41_PM.png"/></a></figure><ul id="69fbcd2e-0f83-46ba-8c72-aeffc1d23ac7" class="bulleted-list"><li>For phrase queries, we use a merge algorithm recursively at the doc level.</li></ul><ul id="a08cfd59-4fa5-4959-8fd6-55a6fa0c273b" class="bulleted-list"><li><mark class="highlight-orange"><strong>k word proximity searches:</strong></mark> Find places where the words are within k proximity.</li></ul><figure id="42e83e0e-3fdc-4a7e-b689-f5be1beafb5d" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_5.24.02_PM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_5.24.02_PM.png"/></a></figure><ul id="8a92cbbf-8f71-4dab-a553-d0896490180a" class="bulleted-list"><li>Need an entry for each occurrence, not just once per doc, Index size depends on average doc size.</li></ul><ul id="b48321cc-84e0-4f67-9985-7a1654542e04" class="bulleted-list"><li>Positional index size 35–50% of volume of original text.</li></ul><hr id="1c0c0889-2ac7-459b-9d5c-d3e43662b16f"/><h2 id="fb2c7241-e03f-43c0-9e00-f63333874734" class=""><mark class="highlight-pink">2. Text Operations</mark></h2><hr id="c9cce8b7-ad66-40d1-bf5f-92938cd6d8df"/><ul id="f4e5e4bd-3a08-4cee-9afc-751299c9d3e6" class="bulleted-list"><li><mark class="highlight-orange"><strong>Text operations:</strong></mark> Preprocessing to form the term vocabulary.</li></ul><ul id="e2f73729-1387-4d37-a802-afdf256afd63" class="bulleted-list"><li>Older IR systems may not index numbers, but often very useful.</li></ul><ul id="3b9f67e2-9d2d-4787-ba9a-dd51bade5b93" class="bulleted-list"><li>Will often index “meta-data” separately.</li></ul><ul id="227415f0-177b-405c-a4f8-babd94291624" class="bulleted-list"><li><mark class="highlight-orange"><strong>Stop list:</strong></mark> exclude from dictionary the <mark class="highlight-yellow">commonest words.</mark>
They have little semantic content: ‘the’, ‘a’, ‘and’, ‘to’, ‘be’
There are a lot of them: ~30% of postings for top 30 words</li></ul><ul id="961fcb96-da5c-4101-8416-028943610031" class="bulleted-list"><li><mark class="highlight-yellow">You need them for:</mark> Phrase queries, Various song titles, Relational queries.</li></ul><ul id="d873f05f-f6e4-48db-93ff-881f33da8f3a" class="bulleted-list"><li><mark class="highlight-orange"><strong>Normalization:</strong></mark> Normalize words in indexed text (<mark class="highlight-yellow">also</mark> <mark class="highlight-yellow">query</mark>).</li></ul><ul id="b1bdf9f3-db3c-4449-acda-8c4326b430ed" class="bulleted-list"><li><mark class="highlight-orange"><strong>Term</strong></mark> is a (normalized) word type, which is an entry in our IR system dictionary.</li></ul><ul id="73902a48-fd5b-44d9-bca4-4b525f3b7ceb" class="bulleted-list"><li>Two implementations:<ul id="e85e8046-8b5d-4308-8a70-dd8e6e641713" class="bulleted-list"><li>When the doc contains automobile, index it under car- automobile (and/or vice-versa).</li></ul><ul id="01e408d1-192e-49a8-bc9a-e23f5489fc93" class="bulleted-list"><li><mark class="highlight-orange"><strong>Expandation:</strong></mark> When the query contains automobile, look under car as well (can have asymmetry) - Potentially more powerful, but less efficient</li></ul></li></ul><ul id="f3d1d1f4-2106-4677-9d48-6dfd29d06f45" class="bulleted-list"><li>Often best to lower case everything, since users will use lowercase regardless of ‘correct’ capitalization</li></ul><ul id="4fc1203b-5d6e-42bd-b686-114147642fd4" class="bulleted-list"><li><mark class="highlight-orange"><strong>Lemmatization:</strong></mark> Reduce inflectional/variant forms to their base form. Doing “proper” reduction to dictionary headword form.
It needs a complete vocabulary and morphological analysis to correctly lemmatize words.</li></ul><ul id="49aa3646-c1cc-45f0-b412-60112e4fdb1b" class="bulleted-list"><li><mark class="highlight-orange"><strong>stemming:</strong></mark> Reduce terms to their “roots” before indexing.</li></ul><ul id="dec5ba73-0dce-4d80-b381-51eec1085009" class="bulleted-list"><li>Stemmers use language-specific rules, but they require less knowledge than a lemmatizer.<ul id="2564c9e1-d34a-427d-a875-2f96c7100cfc" class="bulleted-list"><li><mark class="highlight-orange"><strong>Porter’s algorithm:</strong></mark> Rules sensitive to the measure of words.</li></ul></li></ul><ul id="79517560-9cca-41ec-a5b0-d4c6cb22e841" class="bulleted-list"><li>Stemming and other normalizations have very mixed results for English. Helps recall but harms precision.</li></ul><ul id="572e4fb6-208b-40da-afb3-b73a1c48e2da" class="bulleted-list"><li><mark class="highlight-orange"><strong>Lemmatization vs. Stemming:</strong></mark> Lemmatization produces at most very modest benefits for retrieval. </li></ul><ul id="289aaa00-39a3-4d80-af58-e3539ceb6f84" class="bulleted-list"><li>Either form of normalization tends not to improve English information retrieval performance in aggregate.</li></ul><hr id="66cb14a1-a903-4826-b2c3-f658fdd379a9"/><h2 id="0d5c6ce9-c5c4-4b4f-96ce-d57639948cfa" class=""><mark class="highlight-pink">3. Tolerant Retrieval</mark></h2><hr id="1aec028d-e370-4a0c-849c-d0d9f539b77f"/><h3 id="c1ea0393-f2ff-4a17-8f48-12c06452a1d3" class=""><mark class="highlight-red">Dictionary Data Structures</mark></h3><ul id="93ebff6c-1cfa-41dd-82b9-eb81775190bd" class="bulleted-list"><li><mark class="highlight-orange"><strong>Hash tables:</strong></mark> Each vocabulary term is hashed to an integer.<ul id="7dae3a34-9336-4d6b-a8d1-3d7b52c48986" class="bulleted-list"><li><strong><mark class="highlight-teal">Pros:</mark></strong><strong> </strong><ol id="a366d500-707f-487b-918c-7625113fef20" class="numbered-list" start="1"><li>Lookup is faster than for a tree: <code>O(1)</code> (with no collision)</li></ol></li></ul><ul id="8c666f1e-e351-458b-afef-17a9c5b9a094" class="bulleted-list"><li><strong><mark class="highlight-red">Cons: </mark></strong><ol id="ceafa706-a193-4728-84dc-e9228036986f" class="numbered-list" start="1"><li><mark class="highlight-yellow">No</mark> easy way to find minor <mark class="highlight-yellow">variants</mark></li></ol><ol id="c38c5852-9e00-481e-b15d-60d4ee6a810a" class="numbered-list" start="2"><li><mark class="highlight-yellow">No prefix</mark> search</li></ol><ol id="29ee7ce7-e992-4383-a35e-9094f517c474" class="numbered-list" start="3"><li>If vocabulary keeps growing, need to occasionally <mark class="highlight-yellow">rehash</mark> <mark class="highlight-yellow">everything</mark></li></ol></li></ul></li></ul><ul id="eaabeed1-e104-4987-a8ec-72dfd46d92d1" class="bulleted-list"><li><mark class="highlight-orange"><strong>Binary tree:</strong></mark> 
Simplest: binary tree
More usual: B-trees<ul id="e68f1b4e-9d73-4d90-a000-a598d95bab6f" class="bulleted-list"><li><strong><mark class="highlight-teal">Pros:</mark></strong><mark class="highlight-teal"> </mark><ol id="c8f714e7-7c6e-4696-8632-6532544dce5d" class="numbered-list" start="1"><li>Solves the <mark class="highlight-yellow">prefix</mark> problem</li></ol><ol id="b3dd57a9-2d9f-4d2f-988d-d337ab832ca2" class="numbered-list" start="2"><li>Solves minor <mark class="highlight-yellow">variants</mark> problem</li></ol></li></ul><ul id="bc2966df-2ca6-4c1a-ae83-8e876d411203" class="bulleted-list"><li><mark class="highlight-red"><strong>Cons: </strong></mark><ol id="24baed7f-1000-4894-b5b2-0c3dbd28a926" class="numbered-list" start="1"><li><mark class="highlight-yellow">Slower:</mark> <code>O(log M)</code> (with <em>balanced</em> tree)
*M: size of vocabulary (|V|)</li></ol><ol id="54763536-7ab4-4259-a387-0e4576574c01" class="numbered-list" start="2"><li><mark class="highlight-yellow">Rebalancing</mark> binary trees is <mark class="highlight-yellow">expensive</mark> (But B-trees mitigate the rebalancing problem)</li></ol><p id="f12f9600-46ae-465c-8d93-f2657462b5dc" class="">
</p></li></ul></li></ul><figure id="760bfcef-01f8-4d4b-b50c-aaeac9054e63" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_9.10.40_PM.png"><img style="width:528px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_9.10.40_PM.png"/></a></figure><ul id="05c5dfc9-ef10-4c34-a882-c3ded4160bb1" class="bulleted-list"><li><mark class="highlight-orange"><strong>B-tree:</strong></mark> may be viewed as collapsing multiple levels of the binary tree into one</li></ul><ul id="63875c51-f35d-45f5-86ab-af7dcc61825d" class="bulleted-list"><li>Number of keys is chosen to vary between 𝑑 and 2𝑑</li></ul><h3 id="fa5b1335-45ea-463e-8820-d409517ea9f5" class=""><mark class="highlight-red">Wild-card Queries</mark></h3><ul id="a49a73fb-7803-4d72-adc1-681a77ab824d" class="bulleted-list"><li><mark class="highlight-yellow">Query: mon* →</mark> Any word beginning with “mon”.<p id="673d38d9-d9b6-4717-b9b6-c051cc7122a6" class="">Easy with binary tree (or B-tree) lexicon: retrieve all words in range: mon ≤ w &lt; moo</p></li></ul><ul id="bbc2b09a-ffbb-4387-8f5c-ecc54c0ea768" class="bulleted-list"><li><mark class="highlight-yellow">Query: *mon →</mark> Find words ending in “mon”.<p id="3589dc0b-5183-4c81-90dd-a23e28839ed8" class="">Maintain an additional tree for reversed terms (backwards).</p></li></ul><ul id="7efbc46e-e212-4376-96c7-d59f8e5ac0cb" class="bulleted-list"><li><mark class="highlight-yellow">co*tion →</mark> transform wild-card queries so that the *’s occur at the end.</li></ul><ul id="fe11a0e2-edb9-443f-9bb2-79e76d87be44" class="bulleted-list"><li>Wild-cards can result in <mark class="highlight-yellow">expensive</mark> query execution.
If you encourage “laziness” people will respond!</li></ul><h3 id="2483f7af-b7e5-4060-a097-473360aadfa6" class=""><mark class="highlight-red">Permuterm Index</mark></h3><ul id="2370676a-4524-402f-8708-f2a2ff6f61ff" class="bulleted-list"><li><mark class="highlight-orange"><strong>Permuterm index:</strong></mark> Add a $ to the end of each term, Rotate the resulting term and index them in a B-tree.</li></ul><figure id="aef8c73b-67cd-4dd2-821c-c1fd214ec1a1" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-07_at_1.14.05_PM.png"><img style="width:240px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-07_at_1.14.05_PM.png"/></a></figure><ul id="53d9ec35-335c-4901-b8d3-3cfb50052bf5" class="bulleted-list"><li><mark class="highlight-orange"><strong>Permuterm query processing:</strong></mark> (Add $), rotate * to end, lookup in permuterm index, Lookup the matched terms in the standard inverted index:</li></ul><figure id="1ce4cb16-daf3-495f-8e3e-56fa04393fd5" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_9.26.33_PM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_9.26.33_PM.png"/></a></figure><h3 id="5fc3ad10-076f-40bc-9782-97662c83f9a4" class=""><mark class="highlight-red">K-gram Index</mark></h3><ul id="25a6b5b0-847e-4aa1-9ea7-c8fb19dc13c0" class="bulleted-list"><li><mark class="highlight-orange"><strong>Bigram (k-gram) indexes: </strong></mark>Enumerate all k-grams (sequence of k chars) </li></ul><ul id="7f785c98-3b8a-46be-9ef1-5f60b1cd1603" class="bulleted-list"><li>Maintain a second inverted index from bigrams to dictionary terms that match each bigram.</li></ul><ul id="c77d5f34-4472-4a33-a43d-ee3399295cdb" class="bulleted-list"><li><mark class="highlight-orange"><strong>k-gram index:</strong></mark> finds terms based on a query consisting of k-grams (here k=2).<figure id="756fb173-50c1-4e74-8ae7-33290c329e69" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_9.36.51_PM.png"><img style="width:432px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_9.36.51_PM.png"/></a></figure></li></ul><ul id="1ec0fe28-b6a6-49ce-b6e1-38ed005b6640" class="bulleted-list"><li>Has false positives: Must <mark class="highlight-yellow">post-filter</mark> these terms against query.</li></ul><ul id="be9d5f9a-cd8b-4fa7-96e7-c6ee4760293a" class="bulleted-list"><li>Run surviving ones through term-document inverted index.</li></ul><h3 id="506ec632-6bef-48ba-9e27-90609c763da3" class=""><mark class="highlight-red">Spelling Correction</mark></h3><ul id="3d98ce82-7285-447f-990c-6b28e0dab008" class="bulleted-list"><li><mark class="highlight-orange"><strong>Spelling error detection:</strong></mark> when the query term is <mark class="highlight-yellow">not in the dictionary</mark>, OR when the original query <mark class="highlight-yellow">returned fewer </mark>than a preset number of docs.
usually dictionary also has spelling errors, so the second method is better.</li></ul><ul id="ae383851-137b-4657-bbfe-3b32c770a82a" class="bulleted-list"><li><mark class="highlight-orange"><strong>Types of spelling errors:</strong></mark> <ol id="1cef96c9-8c6e-40be-9f0a-f2f19730f6e9" class="numbered-list" start="1"><li>Non-word Errors</li></ol><ol id="0832907f-08c0-4091-8e0a-625c4b9e9eda" class="numbered-list" start="2"><li>Real-word Errors<p id="ecc90ab1-8f0b-46d6-880c-2186d5426d51" class="">Typographical errors: three → there</p><p id="16081b56-0c86-4fc9-a727-3ee0f5222e24" class="">Cognitive Errors (homophones): too → two</p></li></ol></li></ul><ul id="c1cc8e2d-dc49-44c4-b81f-e1e4c3b23016" class="bulleted-list"><li>Two main flavors:<ul id="ac9c529f-f7c5-4fd0-ad99-fb23490d58ec" class="bulleted-list"><li><mark class="highlight-orange"><strong>Isolated word (Non-word):</strong></mark> Check each word on its own for misspelling.
Will not catch typos resulting in correctly spelled words.</li></ul><ul id="32ee23f3-49d9-4cfc-b06a-07203f4f9de7" class="bulleted-list"><li><mark class="highlight-orange"><strong>Context-sensitive:</strong></mark> Look at surrounding words.</li></ul></li></ul><ul id="152ab156-dd13-49a0-b3af-5a4919ccb52b" class="bulleted-list"><li><mark class="highlight-orange"><strong>Edit distance:</strong></mark> given two strings S1 and S2, the minimum number of operations to convert one to the other. <mark class="highlight-yellow">Insert, Delete, Replace</mark></li></ul><figure id="fa500fbc-1afe-45b7-8ba5-18c392363bb8" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.10.02_PM.png"><img style="width:672px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.10.02_PM.png"/></a></figure><ul id="224910e1-ce12-4d00-823d-f132e71b2291" class="bulleted-list"><li><mark class="highlight-orange"><strong>Weighted edit distance:</strong></mark> keyboard errors, this may be formulated as a probability model </li></ul><ul id="c1503dfb-1a5c-416d-837b-f27b88b6e8fb" class="bulleted-list"><li><mark class="highlight-orange"><strong>Paradigm:</strong></mark> <ul id="4c08c02b-cfff-41fa-88bc-9fdc69d5300f" class="bulleted-list"><li>Find a good candidate set</li></ul><ul id="fa1b7b71-f0a5-4c86-a7ce-1262f7741857" class="bulleted-list"><li>Find the <mark class="highlight-yellow">top K amongst them</mark> and return them as the best</li></ul></li></ul><ul id="ad6d4f11-4a97-4425-a0e0-470f0e63dc49" class="bulleted-list"><li><mark class="highlight-orange"><strong>Candidate generation:</strong></mark> <ol id="2d10ec5b-7db7-454d-8fbb-7fd97a3f8613" class="numbered-list" start="1"><li>Run through dictionary, check edit distance with each word</li></ol><ol id="6472db5f-897f-488e-9eff-e194c07db2a6" class="numbered-list" start="2"><li>Generate all words within edit distance ≤ k (e.g., k = 1 or 2) and then intersect them with dictionary</li></ol><ol id="60b68c01-c30d-408d-b9c7-7cffa6989554" class="numbered-list" start="3"><li>Use a character k-gram index and find dictionary words that share “most” k-grams with word (e.g., by Jaccard coefficient)</li></ol><ol id="19660c9f-1ea4-446c-b372-dc98cb44ba98" class="numbered-list" start="4"><li>Have a precomputed map of words to possible corrections</li></ol></li></ul><h3 id="0c8b0121-d05e-4e5e-9ac1-e586b578d5ef" class=""><mark class="highlight-red">Jaccard Coefficient</mark></h3><figure id="85dfb728-ddba-4edc-968d-749955a2c082" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi><mi>C</mi><mo>(</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∣</mi><mi>X</mi><mo>∩</mo><mi>Y</mi><mi mathvariant="normal">∣</mi></mrow><mrow><mi mathvariant="normal">∣</mi><mi>X</mi><mo>∪</mo><mi>Y</mi><mi mathvariant="normal">∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">JC(X, Y) = \frac{|X \cap Y|}{|X \cup Y|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.09618em;">J</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mord">∣</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><pre id="97916bd8-2878-42b2-8e34-ffdee9c60743" class="code"><code># compute this for every t2 in t1&#x27;s bigram terms
def jaccard_coefficient(t1, t2):
    global bigram_index
    chars = &#x27;$&#x27; + t1 + &#x27;$&#x27;
    
    terms_intersection = 0
    for i in range(len(chars) - 1):
        if t2 in bigram_index[chars[i:i + 2]]:
            terms_intersection += 1
            
    terms_union = len(t1) + 1 + len(t2) + 1 - terms_intersection
    
    return terms_intersection / terms_union

for t2 in bigram_words:
    if jaccard_coefficient(term, t2) &gt; 0.4:
        candidates.add(t2)</code></pre><h3 id="15dd90cd-56f5-4a8c-ba55-9763335c580b" class=""><mark class="highlight-red">Noisy Channel</mark></h3><p id="65631f31-dfbe-4bae-8e47-7dfd8f573ab1" class="">
</p><figure id="face3c18-3baa-4e62-87a6-95ba38787a58" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.29.10_PM.png"><img style="width:288px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.29.10_PM.png"/></a></figure><ul id="a6f28b27-65ef-489b-91de-002855420471" class="bulleted-list"><li>Take a big supply of words with T tokens:</li></ul><figure id="868cac6a-ac04-474f-92f0-4ceff9f4b1ac" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>w</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mi>C</mi><mo>(</mo><mi>w</mi><mo>)</mo></mrow><mi>T</mi></mfrac></mrow><annotation encoding="application/x-tex">p(w) = \frac{C(w)}{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">p</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><p id="575453d7-cddc-4576-987e-6812bd8fca21" class=""><mark class="highlight-yellow">→</mark> C(w) = # occurrences of w</p><ul id="3b3ef63c-5152-42d0-aeb9-43bd7a0a5725" class="bulleted-list"><li><mark class="highlight-orange"><strong>Calculating P(x|w): </strong></mark>probability of the edit<ul id="e7fa3c9a-a88d-4899-a4ac-4eec7e53f51f" class="bulleted-list"><li>Misspelled word: x = x1, x2, x3,... ,xm
Correct word: w = w1, w2, w3,..., wn</li></ul><ul id="387272c5-dbb9-4953-851d-b793dbf33fca" class="bulleted-list"><li>Confusion matrix (<mark class="highlight-yellow">4 *</mark> 26 * 26 table)</li></ul></li></ul><div id="c3d765bb-90ad-4790-9367-1c2995b2ab60" class="column-list"><div id="8f4f59c0-088c-4903-8197-b0fd7e27fd75" style="width:50%" class="column"><figure id="a26a5ae4-c48b-484e-b1d2-1b86b6e67b3b" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.33.33_PM.png"><img style="width:336px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.33.33_PM.png"/></a></figure><figure id="e1886b3f-3890-4a7e-bcbc-606bf19ed0a6" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.37.08_PM.png"><img style="width:240px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.37.08_PM.png"/></a></figure></div><div id="ccce98cf-9d26-4fb6-9862-7fbb1e89924e" style="width:50%" class="column"><figure id="d59d65c4-2768-4968-ae09-93470b471959" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.35.48_PM.png"><img style="width:384px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-30_at_10.35.48_PM.png"/></a></figure></div></div><figure id="9905a701-7386-443e-a381-acb0542fa966" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-07_at_8.04.00_PM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-07_at_8.04.00_PM.png"/></a></figure><h3 id="2ca371b2-8ce9-4dab-a9ba-d3716d983495" class=""><mark class="highlight-red">Context-Sensitive</mark></h3><ul id="317a94b6-d860-4871-a39b-16dc98585d78" class="bulleted-list"><li>Generate candidate set (can be pre-computed):<ul id="39f28bad-5011-4eb2-833f-8844ec280ee2" class="bulleted-list"><li>the word itself</li></ul><ul id="7bf40638-9891-4487-be1e-bba7ed6bb127" class="bulleted-list"><li>all single-letter edits that are English words</li></ul><ul id="6b44cb0e-881c-42af-8d1c-54a1eb884247" class="bulleted-list"><li>words that are homophones</li></ul></li></ul><ul id="de61ed05-522b-40b5-861f-294522742a81" class="bulleted-list"><li>Choose best candidates: Noisy channel model</li></ul><ul id="ecefa179-f14e-4431-9de6-2647c0671dd2" class="bulleted-list"><li>Choose the sequence W that maximizes P(W|x1,...,xn)<figure id="906a2b0d-3c23-40a2-85ed-5717481bbb5c" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-07_at_8.06.19_PM.png"><img style="width:240px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-07_at_8.06.19_PM.png"/></a></figure></li></ul><ul id="3de3f206-164b-4b21-a2a2-69beae88c191" class="bulleted-list"><li><mark class="highlight-orange"><strong>Bigram language model:</strong></mark> conditions the probability of a word on (just) the previous word.</li></ul><figure id="ab1f2641-02f3-43cc-a8f0-1961560991d0" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><msub><mi>w</mi><mn>1</mn></msub><mo>…</mo><msub><mi>w</mi><mi>n</mi></msub><mo>)</mo><mo>=</mo><mi>P</mi><mo>(</mo><msub><mi>w</mi><mn>1</mn></msub><mo>)</mo><mi>P</mi><mo>(</mo><msub><mi>w</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mn>1</mn></msub><mo>)</mo><mo>…</mo><mi>P</mi><mo>(</mo><msub><mi>w</mi><mi>n</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">P(w_1 \dots w_n) = P(w_1)P(w_2|w_1) \dots P(w_n|w_{n-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></figure><p id="c1340c63-427a-4677-ba6d-8b66d214d5fa" class=""><mark class="highlight-yellow"> →</mark> use log for <mark class="highlight-yellow">floating point underflow</mark>:</p><figure id="59694c1a-7a5d-4936-b9eb-902acd499083" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo>(</mo><msub><mi>w</mi><mn>1</mn></msub><mo>…</mo><msub><mi>w</mi><mi>n</mi></msub><mo>)</mo><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo>(</mo><msub><mi>w</mi><mn>1</mn></msub><mo>)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo>(</mo><msub><mi>w</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mn>1</mn></msub><mo>)</mo><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>P</mi><mo>(</mo><msub><mi>w</mi><mi>n</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">logP(w_1 \dots w_n) = logP(w_1) + logP(w_2|w_1) + \dots + logP(w_n|w_{n-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></figure><ul id="d3c49bf5-d008-424c-9bef-fe3870c40914" class="bulleted-list"><li>For unigram counts, P(w) is always non-zero. (if our dictionary is derived from the document collection)</li></ul><ul id="a51b5841-30f1-4d5e-8fa3-92aa9be628c7" class="bulleted-list"><li>This won’t be true of P(wk|wk−1). We need to <mark class="highlight-yellow">smooth</mark>.</li></ul><figure id="1b00d087-87d6-4e06-904c-a28f5cefcec7" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><msub><mi>w</mi><mi>k</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>w</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>)</mo><mo>=</mo><mfrac><mrow><mi>C</mi><mo>(</mo><msub><mi>w</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>w</mi><mi>k</mi></msub><mo>)</mo><mo>+</mo><mn>1</mn></mrow><mrow><mi>C</mi><mo>(</mo><msub><mi>w</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>)</mo><mo>+</mo><mi mathvariant="normal">∣</mi><mi>V</mi><mi mathvariant="normal">∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(w_k|w_{k-1}) = \frac{C(w_{k-1}, w_k) + 1}{C(w_{k-1}) + |V|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="mord">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><hr id="edaec3e1-0c91-4aad-9246-3ec142620fba"/><h2 id="2273ec40-a559-445b-860b-8a46e1a5d173" class=""><mark class="highlight-pink">4. Index Construction</mark></h2><hr id="1d1a4c59-8642-4eac-9483-db5126a9d8e2"/><ul id="afdafa10-64d1-4c91-b01c-259e562840e5" class="bulleted-list"><li>Access to memory is much faster than access to disk.</li></ul><ul id="9a1651ee-f7e2-4daf-b1e8-2b46bbe712b7" class="bulleted-list"><li><mark class="highlight-orange"><strong>Disk seek:</strong></mark> No data is transferred from disk while the disk head is being positioned.
Therefore: Transferring one large chunk of data from disk to memory is faster than transferring many small chunks.</li></ul><ul id="b08ff0cd-e889-4188-bb39-532a0f108aa4" class="bulleted-list"><li>Disk I/O is <mark class="highlight-yellow">block-based.</mark></li></ul><hr id="81d613f6-f87c-4e77-a4da-90ba5ad446eb"/><div id="b8529b45-2ef3-4f72-8278-4839cd1fbd9f" class="collection-content"><h4 class="collection-title">Hardware assumptions</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M7.73943662,8.6971831 C7.77640845,8.7834507 7.81338028,8.8943662 7.81338028,9.00528169 C7.81338028,9.49823944 7.40669014,9.89260563 6.91373239,9.89260563 C6.53169014,9.89260563 6.19894366,9.64612676 6.08802817,9.30105634 L5.75528169,8.33978873 L2.05809859,8.33978873 L1.72535211,9.30105634 C1.61443662,9.64612676 1.2693662,9.89260563 0.887323944,9.89260563 C0.394366197,9.89260563 0,9.49823944 0,9.00528169 C0,8.8943662 0.0246478873,8.7834507 0.0616197183,8.6971831 L2.46478873,2.48591549 C2.68661972,1.90669014 3.24119718,1.5 3.90669014,1.5 C4.55985915,1.5 5.12676056,1.90669014 5.34859155,2.48591549 L7.73943662,8.6971831 Z M2.60035211,6.82394366 L5.21302817,6.82394366 L3.90669014,3.10211268 L2.60035211,6.82394366 Z M11.3996479,3.70598592 C12.7552817,3.70598592 14,4.24823944 14,5.96126761 L14,9.07922535 C14,9.52288732 13.6549296,9.89260563 13.2112676,9.89260563 C12.8169014,9.89260563 12.471831,9.59683099 12.4225352,9.19014085 C12.028169,9.6584507 11.3257042,9.95422535 10.5492958,9.95422535 C9.60035211,9.95422535 8.47887324,9.31338028 8.47887324,7.98239437 C8.47887324,6.58978873 9.60035211,6.08450704 10.5492958,6.08450704 C11.3380282,6.08450704 12.040493,6.33098592 12.4348592,6.81161972 L12.4348592,5.98591549 C12.4348592,5.38204225 11.9172535,4.98767606 11.1285211,4.98767606 C10.6602113,4.98767606 10.2411972,5.11091549 9.80985915,5.38204225 C9.72359155,5.43133803 9.61267606,5.46830986 9.50176056,5.46830986 C9.18133803,5.46830986 8.91021127,5.1971831 8.91021127,4.86443662 C8.91021127,4.64260563 9.0334507,4.44542254 9.19366197,4.34683099 C9.87147887,3.90316901 10.6232394,3.70598592 11.3996479,3.70598592 Z M11.1778169,8.8943662 C11.6830986,8.8943662 12.1760563,8.72183099 12.4348592,8.37676056 L12.4348592,7.63732394 C12.1760563,7.29225352 11.6830986,7.11971831 11.1778169,7.11971831 C10.5616197,7.11971831 10.056338,7.45246479 10.056338,8.0193662 C10.056338,8.57394366 10.5616197,8.8943662 11.1778169,8.8943662 Z M0.65625,11.125 L13.34375,11.125 C13.7061869,11.125 14,11.4188131 14,11.78125 C14,12.1436869 13.7061869,12.4375 13.34375,12.4375 L0.65625,12.4375 C0.293813133,12.4375 4.43857149e-17,12.1436869 0,11.78125 C-4.43857149e-17,11.4188131 0.293813133,11.125 0.65625,11.125 Z"></path></svg></span>Static</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Value</th></tr></thead><tbody><tr id="b5e9f484-29eb-4b93-8b12-9d6672d4fe90"><td class="cell-title"><a href="https://www.notion.so/average-seek-time-b5e9f48429eb4b938b129d6672d4fe90">average seek time</a></td><td class="cell--#ML">5 ms = 5 x 10^−3 s</td></tr><tr id="7f8071ec-d0dc-4b09-9b73-77060f79f75f"><td class="cell-title"><a href="https://www.notion.so/transfer-time-per-byte-7f8071ecd0dc4b099b7377060f79f75f">transfer time per byte</a></td><td class="cell--#ML">0.02 μs = 2 x 10^−8 s</td></tr><tr id="513aa6bb-98eb-447b-af91-35b3746e92fe"><td class="cell-title"><a href="https://www.notion.so/processor-s-clock-rate-513aa6bb98eb447baf9135b3746e92fe">processor’s clock rate</a></td><td class="cell--#ML">10^9 per s</td></tr><tr id="33578c61-730c-4044-afc9-289b7e7f8b2e"><td class="cell-title"><a href="https://www.notion.so/low-level-operation-e-g-compare-swap-a-word-33578c61730c4044afc9289b7e7f8b2e">low-level operation (e.g., compare &amp; swap a word)</a></td><td class="cell--#ML">0.01 μs = 10^−8</td></tr></tbody></table></div><hr id="74f77fb6-5363-48a5-8fea-ec617ace1a89"/><ul id="d918193e-72ea-4ab1-a644-97cd84f1cab1" class="bulleted-list"><li>In-memory index construction does not scale.</li></ul><ul id="a1ebdaf9-79e7-4bf6-be3e-f248f83cd6c5" class="bulleted-list"><li>Sort using disk as “memory”? too slow, If every comparison needs two disk seeks, we need <code>O(𝑇 log 𝑇)</code> disk seeks. (T = 1 G records of 8 bytes)</li></ul><h3 id="db1614e9-fdb0-41eb-8c94-d74fc7183680" class=""><mark class="highlight-red">BSBI: Blocked Sort-Based Indexing</mark></h3><ul id="949b6eac-e464-4e7b-99e3-4e006159e4bd" class="bulleted-list"><li>basic idea of algorithm:<ol id="6361e94c-095c-4efb-acc1-2f9e4b8bc33f" class="numbered-list" start="1"><li>Segments the collection into blocks (parts of nearly equal size)</li></ol><ol id="cc77a010-0ac0-41f0-941f-bb2bd364304c" class="numbered-list" start="2"><li>Accumulate postings for each block, sort, write to disk.</li></ol><ol id="d7d8b9c8-41eb-404e-ae09-2cfe9c7ea1b6" class="numbered-list" start="3"><li>Then merge the blocks into one long sorted order (read from all blocks simultaneously from disk, sorts, writes back the long sorted index on disk).</li></ol></li></ul><figure id="37cc3bb2-c042-48c2-8bfc-6ec107003a7d" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_11.27.01_AM.png"><img style="width:528px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_11.27.01_AM.png"/></a></figure><ul id="be1b6f2b-db72-4044-8420-360626168247" class="bulleted-list"><li>it uses (termID, docID) and thus needs a data structure for mapping terms to termIDs.
<mark class="highlight-yellow">4+4=8</mark> bytes records
This data structure must be in the <mark class="highlight-yellow">main memory.</mark></li></ul><ul id="bf45339f-e927-4a48-a431-27c716c66b4f" class="bulleted-list"><li>Merge the sorted runs: do a multi-way merge, where you are reading from all blocks simultaneously</li></ul><ul id="7b4c85bb-9172-497e-9885-bcc35d0aa246" class="bulleted-list"><li>&lt;term,docID&gt; postings: <mark class="highlight-yellow">intermediate files</mark> become <mark class="highlight-yellow">very large</mark>, <mark class="highlight-yellow">scalable</mark>, but <mark class="highlight-yellow">very slow</mark> index construction</li></ul><ul id="b0d62c47-c138-4692-a6f7-c8b6f4aba8bb" class="bulleted-list"><li><mark class="highlight-red"><strong>Problems: </strong></mark><ul id="38f7aaac-63b5-4ebe-b288-7ca1435ee356" class="bulleted-list"><li>Our assumption was “keeping the dictionary in memory”</li></ul><ul id="f0f3130f-610c-4162-b080-696319f4677e" class="bulleted-list"><li>We need the dictionary (which grows dynamically) in order to implement a term to termID mapping.</li></ul></li></ul><h3 id="617730e3-a8f8-43da-a9b2-01fcc98b9588" class=""><mark class="highlight-red">SPIMI: Single-Pass In-Memory Indexing</mark></h3><ol id="b49c0656-edfd-48a9-abe8-6ddab8195de0" class="numbered-list" start="1"><li>Generate separate dictionaries for each block</li></ol><ol id="c318e07b-5f00-4fcc-965f-5e014fad1742" class="numbered-list" start="2"><li>Accumulate (and implicitly sort) postings in postings lists as they occur.</li></ol><ul id="f0d4ccbc-8146-4591-95ef-ed32bddf625b" class="bulleted-list"><li>With these two ideas we can generate a complete inverted index for each block.</li></ul><ul id="f2731f89-1094-4a16-a23d-07b97a530269" class="bulleted-list"><li>These separate indexes can then be merged into one big index.</li></ul><ul id="14295fe7-3f5b-4a60-bd22-1591ddd217ef" class="bulleted-list"><li>Merging of blocks is analogous to BSBI.</li></ul><ul id="e588a370-76c4-48ee-aab8-eb4eb79d3c73" class="bulleted-list"><li>No need to maintain term-termID mapping across blocks</li></ul><ul id="8be6bf20-804d-4c19-bd1f-d1567d58ea56" class="bulleted-list"><li>Sort terms before writing to disk, Write posting lists in the lexicographic order to facilitate the final merging step.</li></ul><ul id="7c25ca87-7798-4ca5-9ca5-3ede7d33b3a4" class="bulleted-list"><li><mark class="highlight-teal"><strong>Properties: </strong></mark><ul id="b4c8bfde-0a70-4e92-8c1c-c6cfd5090005" class="bulleted-list"><li><mark class="highlight-yellow">Scalable: </mark>SPIMI can index collection of any size</li></ul><ul id="3f42b2a9-4ed1-4034-a26c-e1f49b78156b" class="bulleted-list"><li>It is more <mark class="highlight-yellow">efficient</mark> than BSBI since it does not allocate a memory to maintain term-termID mapping</li></ul><ul id="8c3335e1-4d1c-4f7f-8fb6-729e3394615d" class="bulleted-list"><li>Some <mark class="highlight-yellow">memory</mark> is <mark class="highlight-yellow">wasted</mark> in the posting list, <mark class="highlight-yellow">variable size array</mark> structure.</li></ul><ul id="fa6a5737-e9bd-4e6a-93b7-cb5443f3b4fa" class="bulleted-list"><li>During the index construction, it is <mark class="highlight-yellow">not required </mark>to store a separate <mark class="highlight-yellow">termID</mark> for each posting (as opposed to BSBI)</li></ul></li></ul><figure id="4fb32f48-167d-40a7-8439-a5bbffb6f4f5" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_11.57.05_AM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_11.57.05_AM.png"/></a></figure><h3 id="a79866b2-e698-4cea-9227-41969079ccf1" class=""><mark class="highlight-red">Distributed Indexing</mark></h3><ul id="4007cdfe-2251-4d47-8854-073ea599533b" class="bulleted-list"><li>Individual machines are fault-prone</li></ul><ul id="23df8320-92fc-42c1-a5a0-1d8026047031" class="bulleted-list"><li>For web-scale indexing must use a distributed computing cluster</li></ul><ul id="54a57b0c-ac45-426e-bdce-fb225fa1379d" class="bulleted-list"><li>Fault tolerance is very expensive</li></ul><ul id="78c8c590-a053-4853-80ad-aeb9e7d7a438" class="bulleted-list"><li><mark class="highlight-orange"><strong>Architecture:</strong></mark><ul id="08e0b35e-26f0-4833-af9f-788fa7268989" class="bulleted-list"><li>Maintain a <mark class="highlight-yellow">master</mark> machine directing the indexing job - considered “safe”.
Stores metadata about where files are stored
Might be replicated</li></ul><ul id="93117d86-bf17-4a9b-87f9-218b0023b99d" class="bulleted-list"><li><mark class="highlight-yellow">Break up indexing</mark> into sets of (<mark class="highlight-yellow">parallel</mark>) tasks</li></ul><ul id="1dbf5156-b897-46ed-ad8a-ab5dc2222e3e" class="bulleted-list"><li><mark class="highlight-yellow">Master</mark> machine <mark class="highlight-yellow">assigns</mark> each task to an idle machine from a <mark class="highlight-yellow">pool</mark>.</li></ul></li></ul><ul id="d2d75d5d-8be0-489b-89ae-9ed5aa355cbc" class="bulleted-list"><li><mark class="highlight-orange"><strong>Parallel tasks:</strong></mark><ul id="4ea00529-022e-4747-85b0-98e5c6c591ce" class="bulleted-list"><li><mark class="highlight-orange"><strong>Parsers:</strong></mark><ul id="a4e909a0-7b8e-40fd-a57a-2ebf5d6024a2" class="bulleted-list"><li>Master assigns a <mark class="highlight-yellow">split</mark> to an idle parser machine</li></ul><ul id="6eb89755-c217-434b-8bce-45c4f9e31fec" class="bulleted-list"><li>Parser reads a <mark class="highlight-yellow">doc at a time</mark> and emits (term, doc) pairs and writes pairs into 𝑗 partitions</li></ul><ul id="44c2fdd6-76a2-48b6-863b-385d7edb1782" class="bulleted-list"><li>Each <mark class="highlight-yellow">partition</mark> is for a range of terms</li></ul></li></ul><ul id="67529f4c-6eed-43cf-868c-b08c11a03f3b" class="bulleted-list"><li><mark class="highlight-orange"><strong>Inverters:</strong></mark><ul id="a802199e-2cce-4511-a41e-283f1d78ff60" class="bulleted-list"><li>An inverter collects all (term,doc) pairs for <mark class="highlight-yellow">one term-partition</mark>.</li></ul><ul id="1bcf4d96-becf-4105-bd90-28e1d87729df" class="bulleted-list"><li><mark class="highlight-yellow">Sorts</mark> and <mark class="highlight-yellow">writes</mark> to postings lists</li></ul></li></ul></li></ul><ul id="109c6529-e00a-4783-9e1f-81d5833b6387" class="bulleted-list"><li>Each <mark class="highlight-yellow">split</mark> is a subset of docs</li></ul><figure id="8cd0703e-6f4e-48fd-a8d9-577749c096ff" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_11.56.39_AM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_11.56.39_AM.png"/></a></figure><h3 id="dbc1e950-4c92-4f7d-98af-6d893fe79faf" class=""><mark class="highlight-red">Map-Reduce</mark></h3><ul id="9a187823-ee80-4357-a862-c0b207d586a0" class="bulleted-list"><li>Input data is partitioned into M splits.</li></ul><ul id="913b43f5-9619-4479-913b-b9e3aef11f9f" class="bulleted-list"><li><strong><mark class="highlight-orange">Map:</mark></strong><mark class="highlight-orange"> extract information on each split (Sequentially)</mark><p id="6c7f7cfb-4c74-453d-8d7c-8b4edcb48947" class="">Each Map produces <mark class="highlight-yellow">R partitions</mark></p></li></ul><ul id="0736dee5-4930-49de-9b88-cbdb9a64ac9e" class="bulleted-list"><li>Shuffle and sort<p id="9d1bea26-2e97-47c7-8c04-9f384f29b6a5" class="">Bring M partitions to the <mark class="highlight-yellow">same reducer</mark></p></li></ul><ul id="12df33dc-f2eb-4321-9c7f-e00f2065bada" class="bulleted-list"><li><strong><mark class="highlight-orange">Reduce:</mark></strong><mark class="highlight-orange"> aggregate, summarize, filter or transform</mark></li></ul><ul id="589ba6c5-6a25-4cf5-af5f-c5e7f7d0ed02" class="bulleted-list"><li>Output is in <mark class="highlight-yellow">R</mark> <mark class="highlight-yellow">result files</mark></li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="4ad0ce18-3be8-43d9-97c9-9ff071bde589"><div style="font-size:1.5em"><span class="icon">🔸</span></div><div style="width:100%"><mark class="highlight-orange"><strong>map:</strong></mark> (k, v) → list(key, value)</div></figure><figure id="433d34ff-88fb-46b2-bf5e-e04c106f2b60" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_12.07.05_PM.png"><img style="width:480px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_12.07.05_PM.png"/></a></figure><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="6817be33-f6f4-4a45-8fc6-1bc82e7dd7bb"><div style="font-size:1.5em"><span class="icon">🔸</span></div><div style="width:100%"><mark class="highlight-orange"><strong>reduce: </strong></mark>(key, list(value)) → (key2, list(value2))</div></figure><figure id="57b15981-b168-4974-83d2-d9f01bfbcb55" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_12.07.22_PM.png"><img style="width:480px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_12.07.22_PM.png"/></a></figure><figure id="14111b90-4e0b-49da-9119-b3bb08f08f75" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_12.10.28_PM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_12.10.28_PM.png"/></a></figure><ul id="85172c0d-e0a6-4a16-adb2-9396150dbaa8" class="bulleted-list"><li><mark class="highlight-orange"><strong>Map-Reduce environment:</strong></mark><ul id="8924a29b-4a46-4cf2-8c53-02b22aef3fd4" class="bulleted-list"><li><mark class="highlight-yellow">Partitioning</mark> the input data</li></ul><ul id="0e312349-dbfc-4357-82e3-4cdd3c01f106" class="bulleted-list"><li><mark class="highlight-yellow">Scheduling</mark> the program’s execution across a set of machines</li></ul><ul id="4258d474-ae89-41da-afce-70e49c3e8bf3" class="bulleted-list"><li>Performing the <mark class="highlight-yellow">group by key </mark>step</li></ul><ul id="77cdb232-af93-435c-b0a3-7d40eadb1ea6" class="bulleted-list"><li>Handling machine <mark class="highlight-yellow">failures</mark></li></ul><ul id="f5e55c55-eb19-4fc5-a7e9-20fa65c47ce5" class="bulleted-list"><li>Managing required inter-machine <mark class="highlight-yellow">communication</mark></li></ul></li></ul><ul id="4799b73b-0315-43ce-841f-7c6f09c8edf7" class="bulleted-list"><li><mark class="highlight-orange"><strong>Distribute indexing schemes:</strong></mark><ul id="c575ec62-28c0-488e-aca2-5eacb7f8b610" class="bulleted-list"><li><mark class="highlight-orange">Term-partitioned:</mark> one machine handles a subrange of terms<ul id="98feba6c-2634-4928-9dcb-780e2f648264" class="bulleted-list"><li><mark class="highlight-red">Load balancing</mark>, <mark class="highlight-red">Scalability</mark>, <mark class="highlight-teal">Disk</mark> <mark class="highlight-teal">seek</mark>, <mark class="highlight-red">Dynamic</mark></li></ul></li></ul><ul id="78f9fe00-5c03-4452-95dd-b2d1eece8a85" class="bulleted-list"><li><mark class="highlight-orange">Document-partitioned:</mark> one machine handles a subrange of docs<ul id="f432b396-fb50-4e9a-bc11-8690c9c1161e" class="bulleted-list"><li><mark class="highlight-teal">Load</mark> <mark class="highlight-teal">balancing</mark>, <mark class="highlight-teal">Scalability</mark>, <mark class="highlight-red">Disk</mark> <mark class="highlight-red">seek</mark>, <mark class="highlight-teal">Dynamic</mark></li></ul></li></ul></li></ul><h3 id="feef2411-4cef-40a5-8527-fecb9867117d" class=""><mark class="highlight-red">Dynamic Indexing</mark></h3><ul id="c434992a-c18f-43c2-a6dc-46a242bcb160" class="bulleted-list"><li>Maintain “big” <mark class="highlight-yellow">main index</mark></li></ul><ul id="05dc6f43-ebab-414e-bc15-9a14db3b1f77" class="bulleted-list"><li>New docs go into “small” <mark class="highlight-yellow">auxiliary index</mark></li></ul><ul id="02015c50-0e99-4617-8896-6b99c4576436" class="bulleted-list"><li>Search across both, <mark class="highlight-yellow">merge results</mark></li></ul><ul id="abb9a63b-f42a-4fa0-b239-9e6fbb7671e7" class="bulleted-list"><li><strong><mark class="highlight-orange">Deletions:</mark></strong> Invalidation bit-vector for deleted docs, Filter docs output on a search result by this invalidation bit-vector</li></ul><ul id="34e00170-b033-41f0-a6fd-cc51c48c9484" class="bulleted-list"><li><mark class="highlight-yellow">Periodically</mark>, re-index into one main index</li></ul><ul id="bd0dcf8e-d07c-43d2-b345-ac2e71fddf09" class="bulleted-list"><li>Poor performance during merge</li></ul><hr id="24d0a0a7-4c8f-4528-a113-922164719964"/><h2 id="8f4ad19e-90fa-48fc-8cce-1525e4efe812" class=""><mark class="highlight-pink">5. Index Compression</mark></h2><hr id="a8b9778d-6230-4eb2-a9f6-f574ae2eaca9"/><ul id="c09b3608-11b0-49be-a486-6a16ed359f3a" class="bulleted-list"><li>Use <mark class="highlight-yellow">less disk space</mark> (save <mark class="highlight-yellow">money</mark>)</li></ul><ul id="5b0f2646-afc2-411b-ac85-d4d2bdbc5f5e" class="bulleted-list"><li>Keep <mark class="highlight-yellow">more stuff in memory </mark>(increases <mark class="highlight-yellow">speed</mark>)</li></ul><ul id="129ccd7f-f04b-40c4-8f4c-bfe73fa11129" class="bulleted-list"><li>Increase speed of data transfer from disk to memory<p id="434a8544-a7b2-4b2c-ab9c-79cf1ed75a03" class="">[read compressed data + decompress] is faster than [read uncompressed data]</p><p id="f917709b-9760-49e9-ab44-a202c1193ba1" class=""><mark class="highlight-yellow">Premise:</mark> Decompression algorithms are fast</p></li></ul><ul id="98c351db-858e-4436-9b02-f303a492c539" class="bulleted-list"><li><mark class="highlight-orange"><strong>Dictionary:</strong></mark> Make it so small that you can keep some postings lists in main memory <mark class="highlight-yellow">too</mark></li></ul><ul id="e3f2df4d-144d-443d-9f4b-ec342e7722ae" class="bulleted-list"><li><strong><mark class="highlight-orange">Postings files:</mark></strong> <mark class="highlight-yellow">Reduce disk</mark> space needed, <mark class="highlight-yellow">Decrease time</mark> to read from disk, compression to keep <mark class="highlight-yellow">in memory</mark></li></ul><ul id="f7d27a64-2e19-46d1-933c-f6607f97afae" class="bulleted-list"><li><mark class="highlight-orange"><strong>Lossless compression: </strong></mark>All information is preserved.</li></ul><ul id="1457ea89-efda-4b54-b2ff-d825d4c2e050" class="bulleted-list"><li><mark class="highlight-orange"><strong>Lossy compression:</strong></mark> Discard some information</li></ul><ul id="137817c1-3366-472c-b7e1-973d009fddbc" class="bulleted-list"><li><mark class="highlight-yellow">lossy preprocessing:</mark> case folding, stop words, stemming, number elimination</li></ul><h3 id="0ed93fc1-4b2c-4592-8248-ae4c120ce45f" class=""><mark class="highlight-red">Dictionary Compression</mark></h3><ul id="ab9eaebe-a53f-45cc-bf3d-5f9c6e5a157d" class="bulleted-list"><li><strong><mark class="highlight-orange">Heaps&#x27; Law: </mark></strong>Estimating the number of terms<strong><mark class="highlight-orange">
</mark></strong><mark class="highlight-yellow">M: # terms </mark>   <mark class="highlight-yellow">T: # tokens </mark>   Typical values: 30 ≤ k ≤ 100 and b ~ 0.5</li></ul><figure id="d884a367-1502-40d0-9120-07ca75ef43b7" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo>=</mo><mi>k</mi><msup><mi>T</mi><mi>b</mi></msup></mrow><annotation encoding="application/x-tex">M = kT^b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8991079999999999em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">b</span></span></span></span></span></span></span></span></span></span></span></span></div></figure><ul id="37019a96-f214-4b46-bd00-c0dc7058256e" class="bulleted-list"><li>In a log-log plot of vocabulary size M vs. T, Heaps’ law predicts a line with slope about 1⁄2.</li></ul><ul id="21f79f49-33b5-496a-9eb2-a5024b67efca" class="bulleted-list"><li><mark class="highlight-orange"><strong>An array of struct: </strong></mark>Most of the bytes in the Term column are wasted.<figure id="d0b90524-f64d-419d-8aef-12ec09e865ab" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.01.02_PM.png"><img style="width:432px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.01.02_PM.png"/></a></figure></li></ul><ul id="ce6cd377-991c-4352-8279-39927ee4623d" class="bulleted-list"><li><mark class="highlight-orange"><strong>Dictionary-as-a-string: </strong></mark>Store dictionary as a (long) string of characters. Pointer to next word shows end of current word.<figure id="f2cc991d-2ad5-4e88-a435-4b9da27fb20b" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.03.43_PM.png"><img style="width:2298px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.03.43_PM.png"/></a></figure></li></ul><figure id="74eaecf5-9e8b-46d2-a594-74636431abaf" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_7.53.47_PM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_7.53.47_PM.png"/></a></figure><ul id="2be67b46-bff8-4ef2-9469-73bf654ee973" class="bulleted-list"><li><mark class="highlight-orange"><strong>Blocking: </strong></mark>Store pointers to every <em>k</em>th term string.
Need to store term lengths (1 extra byte for each term → <mark class="highlight-yellow">k extra bytes</mark>)<figure id="20e8357e-62d8-4625-b7d4-fcb5b966e6d8" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.06.59_PM.png"><img style="width:2280px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.06.59_PM.png"/></a></figure></li></ul><h3 id="88bdeae3-232b-43e7-b522-244613af6f06" class=""><mark class="highlight-red">Front Coding</mark></h3><ul id="3dbcd255-e205-4c8e-ac4f-4f920309f788" class="bulleted-list"><li>Sorted words commonly have long common prefix, store differences only (for last k-1 in a block of k)</li></ul><figure id="6d92c940-54be-4a10-b0c0-08d5daf4ba79" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_8.18.48_PM.png"><img style="width:624px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_8.18.48_PM.png"/></a></figure><h3 id="7f14aef8-8fcb-49cb-b2ea-d7cf7e54956d" class=""><mark class="highlight-red">Postings Compression</mark></h3><ul id="8196b5fd-eb50-419c-82e7-70e99eec836b" class="bulleted-list"><li>We store the list of docs containing a term in increasing order of docID.</li></ul><ul id="b4273423-2200-439d-a35f-ff7d94dd1903" class="bulleted-list"><li><mark class="highlight-yellow">Consequence:</mark> it suffices to store gaps.</li></ul><ul id="b607a2b1-8770-4b9f-bd3c-64418c46767b" class="bulleted-list"><li>In natural language, there are a few very frequent terms and many very rare terms.</li></ul><ul id="36cda6b3-dc6b-49df-89c9-c2b55fcc12e7" class="bulleted-list"><li><mark class="highlight-orange"><strong>Zipf&#x27;s Law: </strong></mark>Modeling the distribution of terms</li></ul><ul id="bb49b58f-199b-4a8f-8a7c-009079f8f668" class="bulleted-list"><li>The ith most frequent term has frequency proportional to 1/i.</li></ul><ul id="ff6e194f-a5c8-42a6-b33c-59dcc86afddb" class="bulleted-list"><li><mark class="highlight-yellow">cfi is collection frequency:</mark> the number of occurrences of the term ti in the collection.</li></ul><figure id="a22748f0-8b08-4fd7-a233-e11adba2ec5e" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><msub><mi>f</mi><mi>i</mi></msub><mo>∝</mo><mfrac><mn>1</mn><mi>i</mi></mfrac></mrow><annotation encoding="application/x-tex">cf_i \propto \frac{1}{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">c</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">i</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><figure id="2b2680cf-0d54-4c11-8e7e-aba43c032912" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.19.14_PM.png"><img style="width:576px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.19.14_PM.png"/></a></figure><ul id="484296f4-8b9b-4d03-ae6b-ef8c0f469c36" class="bulleted-list"><li><mark class="highlight-red"><strong>Variable length encoding: </strong></mark><ul id="72d85afb-7aba-4ccf-8f0b-41796385b5e2" class="bulleted-list"><li>Average gap for a term: G <mark class="highlight-yellow">→</mark> We want to use ~log𝐺 bits/gap entry.</li></ul><p id="a6fafab3-3601-4ba9-bb9d-87fc0f3a1b9f" class=""><mark class="highlight-orange"><strong>Variable Byte (VB) codes:</strong></mark></p><ul id="f5f18113-4fd8-4cdf-a508-a60d1b91fa1d" class="bulleted-list"><li>Begin with one byte to store G and dedicate 1 bit in it to be a continuation bit c. 
<mark class="highlight-yellow">last byte: c = 0
other bytes: c = 1</mark></li></ul><ul id="ca99b4e9-4c1f-46fb-a938-4c362c019cf5" class="bulleted-list"><li>Variable byte may waste space when many small gaps (<mark class="highlight-yellow">nibbles (4bits)</mark> do better)</li></ul><figure id="0253b8a0-a81f-4c0c-9ab2-47a156fa9440" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.23.26_PM.png"><img style="width:2196px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.23.26_PM.png"/></a><figcaption>824 = 0000 0011 0011 1000 
5 = 0000 0101
214577 = 0000 0011 0100 0110 0011 0001</figcaption></figure><p id="1310f83e-fafb-4db0-ac8b-a0b641e0b249" class=""><mark class="highlight-orange"><strong>Unary code:</strong></mark></p><ul id="2a2e12fc-c8e7-4aa8-9235-21262680e986" class="bulleted-list"><li>3: 1110</li></ul><p id="9d4939dd-f090-4759-ba1d-8d47621e39b9" class=""><mark class="highlight-orange"><strong>Gamma codes:</strong></mark></p><ul id="76753631-18db-428f-a743-4eb2fbbe42e4" class="bulleted-list"><li>Represent a gap G: length + offset</li></ul><ul id="c6eec5e6-9b3b-43f9-b7e3-a0caaafc7749" class="bulleted-list"><li><mark class="highlight-yellow">E.g., 13 → 1101 → 101 ⇒ offset: 101
length: 3 → 1110
Gamma code: 13 → 1110101</mark></li></ul><ul id="18037902-a5f5-4ff2-bae0-07dea36a419b" class="bulleted-list"><li>G → 2 * lower(log G) + 1 bits<figure id="adee1a16-0a29-49c8-873e-8cf0d256b9c1" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.36.18_PM.png"><img style="width:576px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_12.36.18_PM.png"/></a></figure></li></ul><ul id="fd5ad2c4-96c7-4ad9-b506-0efe7dae8a90" class="bulleted-list"><li><mark class="highlight-teal"><strong>Properties:</strong></mark><ul id="e7e2c232-3832-4a32-86a1-f1e776205f05" class="bulleted-list"><li>always odd bits</li></ul><ul id="e3da2f31-da9f-4999-8f4f-20a15e57d1f1" class="bulleted-list"><li>almost log G.</li></ul><ul id="6b00f796-16c3-40ea-b8ac-b8c9e8ad4a1d" class="bulleted-list"><li>uniquely prefix-decodable</li></ul><ul id="dd3b7b9c-7022-4af2-9f43-72104bf63281" class="bulleted-list"><li>can be used for any distribution</li></ul><ul id="8fb7df67-e6b7-4430-91bb-24d97517a18b" class="bulleted-list"><li>parameter-free</li></ul></li></ul><ul id="fc1ef663-3fea-43a8-a645-6972cfce421f" class="bulleted-list"><li><mark class="highlight-red"><strong>Problems:</strong></mark><ul id="b518dd9f-a8b3-4918-87b2-54edd24d785c" class="bulleted-list"><li>Operations that cross <mark class="highlight-yellow">word boundaries </mark>are slower</li></ul><ul id="9edbe279-80ca-4751-b2f3-8d979617c75f" class="bulleted-list"><li>not aligned</li></ul><ul id="3b80255a-06e8-4967-bd28-c5ebb8c4eef9" class="bulleted-list"><li>VB is simpler and aligned (thus more efficient)</li></ul></li></ul></li></ul><hr id="3427f08c-c1da-446e-8329-6b1f8662df7f"/><h2 id="593c9adb-2aa8-4d84-b06a-94154791cc73" class=""><mark class="highlight-pink">6. Scoring (Vector Space Model)</mark></h2><hr id="fbf93296-c183-4106-a4dd-5f8a3f0e390d"/><ul id="57b3cb35-ff50-43d4-b347-6394fe4a769a" class="bulleted-list"><li><mark class="highlight-orange"><strong>Free text queries:</strong></mark> query is just one or more words in a human language</li></ul><ul id="1b109437-bcef-4b60-85ba-14ba166452ac" class="bulleted-list"><li><mark class="highlight-orange"><strong>bag of words model:</strong></mark> doesn’t consider the ordering of words in a doc</li></ul><ul id="1b47ee94-c5bd-4581-997c-220366d97d39" class="bulleted-list"><li><strong><mark class="highlight-orange">Term frequency tf(t, d):</mark></strong> the number of times that term t occurs in doc d.</li></ul><ul id="edae8955-1c44-44d0-b5c9-fe3bd6a9c3e1" class="bulleted-list"><li><mark class="highlight-orange"><strong>df(t) (document frequency of t):</strong></mark> the number of docs that contain t. df ≤ N
df(t) is an inverse measure of informativeness of t.</li></ul><ul id="25e8b95d-a742-4bd6-bb23-0945e5f6f092" class="bulleted-list"><li><mark class="highlight-orange"><strong>idf(t) (inverse document frequency of t): </strong></mark><mark class="highlight-yellow">log (N/df(t))</mark> instead of N/df(t) to “dampen” the effect of idf.</li></ul><ul id="bc8c0059-50eb-4452-b730-34c4fa3547e0" class="bulleted-list"><li><mark class="highlight-orange"><strong>Collection frequency of t:</strong></mark> number of occurrences of t in the collection, counting multiple occurrences.</li></ul><ul id="223de161-1bf4-4ead-91b6-a8c5f58b9c0c" class="bulleted-list"><li><mark class="highlight-yellow">idf has no effect on ranking one term queries.</mark></li></ul><div id="2fc1686a-9b23-4c24-a821-f248c6fa56be" class="column-list"><div id="97dc1448-59af-4dbb-ad7e-d62edfa46a02" style="width:50%" class="column"><figure id="a5502b0f-5d2c-40fd-877b-675a50b744ac" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>f</mi><mi mathvariant="normal">.</mi><mi>i</mi><mi>d</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>d</mi></mrow></msub><mo>=</mo><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>d</mi></mrow></msub><mo>×</mo><mi>i</mi><mi>d</mi><msub><mi>f</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">tf.idf_{t, d} = tf_{t, d} \times idf_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord">.</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></div></figure></div><div id="45ee2ed3-1fb5-4e3c-ad5b-f8417c52d5ec" style="width:50%" class="column"><figure id="ac1dac40-35dd-4ea2-8d83-d6eeeabd25e0" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>(</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo>)</mo><mo>=</mo><msub><mi mathvariant="normal">Σ</mi><mrow><mi>t</mi><mo>∈</mo><mi>q</mi></mrow></msub><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>d</mi></mrow></msub><mo>×</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>10</mn></msub><mfrac><mi>N</mi><mrow><mi>d</mi><msub><mi>f</mi><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">score(q, d) = \Sigma_{t \in q} tf_{t, d} \times log_{10}\frac{N}{df_t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.28055599999999997em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.2407700000000004em;vertical-align:-0.8804400000000001em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><p id="3189e912-c2d4-44c9-bb53-44810d3c8422" class="">
</p></div></div><ul id="1329611b-5d24-4cb3-943a-5ceddac129a9" class="bulleted-list"><li><mark class="highlight-orange"><strong>|𝑉|-dimensional vector space: </strong></mark><mark class="highlight-yellow">Terms are axes, Docs are points</mark></li></ul><ul id="c844a0ff-6724-4afa-a94b-31b13948cb21" class="bulleted-list"><li>proximity = similarity of vectors</li></ul><ul id="d311a58a-0b5c-4b06-ab23-528f0f729eaf" class="bulleted-list"><li><mark class="highlight-orange"><strong>Length normalization:</strong></mark> Long and short docs now have comparable weights</li></ul><ul id="4ee17b0f-e2e0-4018-87ae-d587f37cfe0e" class="bulleted-list"><li><mark class="highlight-orange"><strong>dot product on length normalized vectors: </strong></mark>Rank docs according to angle with query.</li></ul><ul id="0616a5bb-73fc-4568-ada3-b2857108d8b6" class="bulleted-list"><li>Rank docs in decreasing order of the 𝑎𝑛𝑔𝑙𝑒(𝑞, 𝑑)</li></ul><ul id="4c967343-2490-45a9-b002-0200c782e82a" class="bulleted-list"><li>Rank docs in increasing order of 𝑐𝑜𝑠𝑖𝑛𝑒(𝑞, 𝑑)</li></ul><figure id="113b4c8f-6646-46aa-b9fe-9b3d3f272969" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_9.24.52_PM.png"><img style="width:1676px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_9.24.52_PM.png"/></a></figure><ul id="0cf966b8-c06f-41f3-b33b-c27379b77cf5" class="bulleted-list"><li><strong><mark class="highlight-orange">SMART Notation:</mark></strong> <mark class="highlight-yellow">ddd.qqq
</mark>lnc.ltc, lnc.ltn</li></ul><hr id="749a52f3-6d94-4cd0-aee3-6a758d9acc9f"/><h2 id="cc5a7840-2285-4bbb-9b3a-6626739ace6c" class=""><mark class="highlight-pink">7. Scoring &amp; Result Assembly</mark></h2><hr id="23db480f-e01d-4b97-b6a7-1b7a78f28163"/><ul id="9242e499-f986-4fe4-8786-9effcb0fb478" class="bulleted-list"><li><mark class="highlight-orange"><strong>TAAT = “Term At A Time”:</strong></mark> Scores for all docs computed concurrently, one query term at a time</li></ul><ul id="a4aca045-27fc-4855-ac0f-2a3ae0513888" class="bulleted-list"><li><strong><mark class="highlight-orange">DAAT = “Document At A Time”:</mark></strong> Total score for each doc (including all query terms) computed, before proceeding to the next (concurrent traversal of posting lists).</li></ul><figure id="77c89d63-a742-4bab-9f2e-61a2860a8e8d" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_10.23.09_PM.png"><img style="width:576px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-02-31_at_10.23.09_PM.png"/></a></figure><ul id="007885b3-9d48-4baa-a263-9cbd322b766b" class="bulleted-list"><li>In each posting, store 𝑡𝑓(t, d) in addition to docID (<mark class="highlight-yellow">int</mark>, not float!)</li></ul><ul id="691187b0-964d-4821-b177-08303af4f46e" class="bulleted-list"><li><strong><mark class="highlight-orange">Heap for selecting top K: </mark></strong>
Let <mark class="highlight-yellow">𝐽= number of candidate docs</mark> (nonzero score)
<mark class="highlight-yellow">Construction:</mark> <strong>2𝐽</strong> operations
<mark class="highlight-yellow">𝐾 “winners”:</mark> <strong>2𝐾log 𝐽</strong> operations</li></ul><ul id="0b6114f2-d819-40cf-baf7-f09802d6d6f9" class="bulleted-list"><li><mark class="highlight-orange"><strong>Safe ranking:</strong></mark> methods that guarantee that the K docs returned are the <mark class="highlight-yellow">K absolute highest scoring docs</mark></li></ul><ul id="d4010af4-93ae-4ddf-ab2a-4c6e8383d6e2" class="bulleted-list"><li><mark class="highlight-orange"><strong>Non-safe ranking:</strong></mark> Find a set 𝐴 of contenders, with 𝐾 &lt; |𝐴| ≪ 𝑁
𝐴 does not necessarily contain the top K
but has <mark class="highlight-yellow">many docs from among the top K</mark></li></ul><h3 id="c582e16e-5838-4090-8416-8f87177e5173" class="block-color-red">Non-Safe Ranking</h3><p id="6ca84231-ced4-4095-91f7-81789a04da22" class=""><mark class="highlight-red"><strong>Index elimination, Champion lists, Global ordering, Impact ordering, Cluster pruning</strong></mark></p><hr id="3ce1f49e-90ba-4aaf-836a-996d3567b6a5"/><ul id="6ad7b806-7560-4890-8186-6365926c2ca9" class="bulleted-list"><li><mark class="highlight-orange"><strong>Index elimination:</strong></mark> docs with <mark class="highlight-yellow">at least one</mark> query term, <mark class="highlight-yellow">many</mark> (or all) query terms, <mark class="highlight-yellow">high-idf </mark>query terms</li></ul><ul id="66cc54b6-43df-4307-a80c-4c329e8da8ca" class="bulleted-list"><li><mark class="highlight-orange"><strong>Higher-idf:</strong></mark> low-idf terms are treated as stop words and <mark class="highlight-yellow">do not contribute</mark> to scoring
Postings of low-idf terms have <mark class="highlight-yellow">many docs</mark>
→ many docs are eliminated from set A of contenders</li></ul><ul id="5ba06cfd-f167-40b4-b141-c55e35c6ce0f" class="bulleted-list"><li><mark class="highlight-orange"><strong>Docs containing many query terms:</strong></mark> May find <mark class="highlight-yellow">fewer than k</mark> candidates
<mark class="highlight-yellow">Easy</mark> to implement in postings traversal</li></ul><hr id="cc912421-784a-4032-acd2-a3760c8d744d"/><ul id="be479fcf-1d2d-4971-934f-4b1a14086b3c" class="bulleted-list"><li><mark class="highlight-orange"><strong>Champion lists:</strong></mark> 𝑟 docs of highest weight in the posting list of each dictionary term (aka fancy list or top docs)
<mark class="highlight-yellow">→</mark> At query time, only compute scores for docs in the champion list of some (or all of) query terms</li></ul><ul id="ffedc8f8-f388-4c70-8b16-9bca4f1d3826" class="bulleted-list"><li><strong><mark class="highlight-orange">𝑟</mark></strong><mark class="highlight-orange"> </mark>has to be chosen at index build time</li></ul><hr id="bd8d7f8b-e7ba-4e1e-aff0-2f9f86d08726"/><ul id="d5e89939-f719-469f-9fbb-f2cb131b2217" class="bulleted-list"><li><mark class="highlight-orange"><strong>High &amp; Low lists: </strong></mark>For each term, two postings lists high and low
<mark class="highlight-yellow">High:</mark> like the champion list
<mark class="highlight-yellow">Low:</mark> all other docs containing 𝑡<ul id="658113a1-23f7-46f0-ada2-f07d36dbdbfb" class="bulleted-list"><li>Only traverse high lists first, If we get more than 𝐾 docs, select top 𝐾 and stop, else proceed to get docs from low lists.</li></ul></li></ul><hr id="48e1e12b-5def-4771-9d6e-6791461f4360"/><ul id="31e48203-f7a1-4800-966e-620151f68caf" class="bulleted-list"><li><mark class="highlight-orange"><strong>Static quality-ordered index</strong></mark></li></ul><ul id="1c5a7153-02f7-44f4-b30f-370905a42b14" class="bulleted-list"><li>Top-ranking docs needs to be both <mark class="highlight-yellow">relevant</mark> and <mark class="highlight-yellow">authoritative.</mark></li></ul><ul id="5e9d39be-e23a-4497-be80-bf715b6e2ada" class="bulleted-list"><li><mark class="highlight-orange"><strong>Authority: </strong></mark>typically a <mark class="highlight-yellow">query-independent</mark> property of a doc</li></ul><ul id="c90ced3d-5a07-4ef9-a3e3-477275f1c358" class="bulleted-list"><li><mark class="highlight-orange"><strong>𝑔(𝑑):</strong></mark> a query-independent <mark class="highlight-yellow">quality score</mark> in [0,1] of doc 𝑑</li></ul><figure id="fbc77aef-4576-4912-9198-a929be1500fa" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>e</mi><mi>t</mi><mi>S</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>(</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo>)</mo><mo>=</mo><mi>A</mi><mo>=</mo><mi>g</mi><mo>(</mo><mi>d</mi><mo>)</mo><mo>+</mo><mi>c</mi><mi>o</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>e</mi><mo>(</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">NetScore(q, d) = A = g(d) + cosine(q, d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">e</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mclose">)</span></span></span></span></span></div></figure><ul id="95080a76-35c1-4f92-bc5d-11f2c856f1ba" class="bulleted-list"><li>First idea: Order all postings by 𝑔(𝑑)</li></ul><ul id="16c117c1-68e2-4be6-be01-338c879f34dd" class="bulleted-list"><li>combine champion lists with 𝑔(𝑑)-ordering: Maintain for each term a champion list of 𝑟 docs with highest 𝑔(𝑑) + tf.idf𝑡𝑑, Sorted by a common order 𝑔(𝑑).</li></ul><hr id="bb02d673-2789-4696-8c82-aa8582f502be"/><ul id="48e2749b-b92a-440b-b9ee-b138b0b5b8c6" class="bulleted-list"><li><mark class="highlight-orange"><strong>Impact-ordered postings:</strong></mark> We sort each postings list according to weight 𝑤(t, d), Simplest case: decreasing order of 𝑡𝑓<ul id="71d59ab9-60b3-4a00-90bf-8dee8a3644c9" class="bulleted-list"><li><mark class="highlight-red"><strong>Problems:</strong></mark><ul id="7e08b47d-d265-4f22-8d60-1f87311def4d" class="bulleted-list"><li>no longer a consistent ordering of docs in postings lists.</li></ul><ul id="4e286a27-37c1-4f83-9730-e9f7fa5e3900" class="bulleted-list"><li>no longer can employ DAAT processing</li></ul></li></ul><ul id="c05ce91f-327b-48ad-b485-dfa164d3ccf3" class="bulleted-list"><li><mark class="highlight-orange"><strong>Early termination: </strong></mark>When traversing 𝑡’s postings, stop early after either<ul id="40cb8b67-3b0f-4db3-b7c3-b46b3fd1226e" class="bulleted-list"><li>a fixed number of 𝑟 docs</li></ul><ul id="b969cb2a-6ecd-4311-8f0a-9c0587243df9" class="bulleted-list"><li>tf-idf(t, d) drops below some threshold</li></ul></li></ul><ul id="8498e26c-98c0-486e-9e8a-913386bed84d" class="bulleted-list"><li><mark class="highlight-orange"><strong>idf-ordered terms:</strong></mark> when accumulating scores, look at query terms in order of decreasing idf<ul id="ade889ea-c281-45c4-a818-2294a6e77b2c" class="bulleted-list"><li><mark class="highlight-yellow">high idf terms</mark> likely to <mark class="highlight-yellow">contribute most</mark> to score</li></ul><ul id="ab4ed06f-897b-46cc-8e82-3c49979e8445" class="bulleted-list"><li>when the changes for previous query terms are minimal, we may <mark class="highlight-yellow">omit accumulation</mark> from the remaining terms, or alternatively <mark class="highlight-yellow">process shorter prefixes</mark> of their postings lists.</li></ul></li></ul></li></ul><hr id="73891092-ead2-4bc5-99f6-b026fcd6b9d8"/><ul id="4378ef1d-a316-48ce-ba51-519c84b86642" class="bulleted-list"><li><mark class="highlight-orange"><strong>Tiered indexes:</strong></mark> Create <mark class="highlight-yellow">several tiers</mark> of indexes, If we’ve only found &lt; k hits: repeat for next index in tier cascade.<ul id="6d8a61f7-e411-407b-b49c-0e43bdcddf9a" class="bulleted-list"><li>Inverted index ⇒ tiers of decreasing importance</li></ul></li></ul><figure id="a3fc7b5d-f95e-4a29-841b-b0fa2806b0a5" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-01_at_11.38.57_AM.png"><img style="width:576px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-01_at_11.38.57_AM.png"/></a></figure><hr id="84b50a06-354b-45fc-b748-ff6db0ee2d9d"/><ul id="4056cf0d-6360-43ad-8af2-4989b06aff1f" class="bulleted-list"><li><mark class="highlight-orange"><strong>Cluster pruning:</strong></mark> 
<mark class="highlight-yellow">Leaders:</mark> <code>sqrt(𝑁)</code> docs at <mark class="highlight-yellow">random</mark> (fast, leaders reflect data distribution).
<mark class="highlight-yellow">Followers:</mark> Docs attached to a leader</li></ul><ul id="3e8e023c-9cfe-43b0-b4d0-0ac45dd7f8cb" class="bulleted-list"><li>Given query 𝑄, find its nearest leader 𝐿, Seek 𝐾 nearest docs from among L’s followers.</li></ul><h3 id="9b455236-e51c-47da-8efb-051e5ca51771" class=""><mark class="highlight-red">Safe Ranking</mark></h3><ul id="9c11e7d5-2612-41c2-9882-83864d8b3538" class="bulleted-list"><li><mark class="highlight-orange"><strong>WAND scoring:</strong></mark> DAAT, basic idea branch &amp; bound:<ul id="6a594cae-8937-472f-8c76-ce40c8b4b217" class="bulleted-list"><li>We maintain a running threshold 𝜃 score – e.g., the Kth highest score computed so far</li></ul><ul id="aa14db04-db44-48a1-8338-b733784d2555" class="bulleted-list"><li>We prune away all docs whose cosine scores are guaranteed to be below the threshold</li></ul><ul id="5c652f4b-329f-450f-b8fe-afe56f1d557f" class="bulleted-list"><li>We compute exact cosine scores for only the un-pruned docs</li></ul></li></ul><ul id="c1cb11cf-6b21-4085-8629-b1f24e1c7c62" class="bulleted-list"><li>Each query term t has a <mark class="highlight-orange"><strong>UBt</strong></mark> : an upper bound on its maximum contribution to any document score (to the right of the finger)<figure id="4ffb6d21-2646-4a28-b3e2-ecc0c4c52fb2" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_6.14.16_PM.png"><img style="width:336px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_6.14.16_PM.png"/></a></figure></li></ul><ul id="c4bb99cb-03c4-4f99-9308-bd48acfeee01" class="bulleted-list"><li>As finger moves right, UB drops</li></ul><ul id="562ebab2-4e3f-44f5-af9e-d3c0f9faeaf9" class="bulleted-list"><li><mark class="highlight-orange"><strong>Pivot:</strong></mark> the smallest doc ID that has a chance of being top k</li></ul><ul id="8c044207-ece9-48d4-ac14-dae00f265339" class="bulleted-list"><li><mark class="highlight-orange"><strong>Pivot:</strong></mark> sum 𝑈𝐵t until the accumulated score becomes greater than threshold 𝜃</li></ul><ul id="9dbb9d23-a937-4ca2-a93c-25498431af73" class="bulleted-list"><li><mark class="highlight-orange"><strong>𝜃:</strong></mark> the min score of the current top k docs in the heap</li></ul><ul id="b33a6bf0-50fc-4d33-9a92-e653d165b906" class="bulleted-list"><li><mark class="highlight-orange">If 𝑈𝐵𝑑,𝑞  &lt; 𝜃:</mark><ul id="f8e163c3-5409-4920-9bcf-2417c3a26bfb" class="bulleted-list"><li>𝑑 has no chance of being in top-k since its max possible score 𝑈𝐵𝑑,𝑞  &lt; 𝜃</li></ul><ul id="f68362c4-e93b-4a65-a4f2-b6884503aecd" class="bulleted-list"><li>Score for 𝑑 is not fully evaluated and d is skipped</li></ul></li></ul><ul id="c52a58b6-808a-4e0d-8224-e7d37167941f" class="bulleted-list"><li><mark class="highlight-orange">If 𝑈𝐵𝑑,𝑞  ≥ 𝜃:</mark><ul id="30f8bd61-31f6-4d55-ad07-c51f21f64dc9" class="bulleted-list"><li>𝑠𝑐𝑜𝑟𝑒 𝑑, 𝑞 is fully evaluated and if it is greater than 𝜃 then 𝑑 is inserted into the heap (if it is not full)</li></ul></li></ul><figure class="block-color-yellow_background callout" style="white-space:pre-wrap;display:flex" id="d871f3d8-9c53-450e-bb7b-4fcc4701b4e6"><div style="font-size:1.5em"><span class="icon">🔸</span></div><div style="width:100%">WAND example in slide 7</div></figure><h3 id="83acf757-08c1-4d44-af2f-18e0ef5be73e" class="block-color-red">Query parsers</h3><ul id="49934be6-38c5-488b-b1a2-64d35380d076" class="bulleted-list"><li>Run the query as a phrase query</li></ul><ul id="02a26115-a02d-449b-a4c5-e76d3c36c672" class="bulleted-list"><li>If &lt;𝐾 docs contain the phrase run smaller phrase queries</li></ul><ul id="9cb2f2a5-2fca-462e-a859-61564864e344" class="bulleted-list"><li>If we still have &lt;𝐾 docs, run the vector space query</li></ul><ul id="3b875ab8-3663-4936-8a58-718938bd3d3f" class="bulleted-list"><li>Rank matching docs by vector space scoring</li></ul><ul id="8f29fe3f-04d2-4c2f-bf97-1a2115c3e7d4" class="bulleted-list"><li><mark class="highlight-orange"><strong>Aggregate scores</strong></mark></li></ul><p id="d8df4043-6697-4d71-a9c1-62404fbaccb0" class="">Parametric and zone indexes ....</p><hr id="c67ffd34-d2b6-4c87-9376-01d70e80c1ba"/><h2 id="f8855d76-e017-4ca2-a374-05cd36e5b494" class=""><mark class="highlight-pink">8. Evaluation</mark></h2><hr id="b8bbfecc-7f6f-49d7-8c9e-431c4898c50d"/><ul id="a7708133-64b9-4466-b474-b647670bad06" class="bulleted-list"><li>The most common proxy to measure human satisfaction is <mark class="highlight-yellow">relevance of search results</mark> to the posed information.</li></ul><ul id="f01d73ea-3f9b-4c1e-b6f2-162b476c1fc0" class="bulleted-list"><li>Relevance measurement requires 3 elements:<ol id="f7b66752-06b7-4630-91f3-9ef816f516cf" class="numbered-list" start="1"><li>A benchmark doc collection</li></ol><ol id="24b6c7c7-6996-4dcf-b95e-dd5e3a7b9086" class="numbered-list" start="2"><li>A benchmark suite of information needs</li></ol><ol id="24d9c92d-aa7d-4c55-8898-ebbff2748391" class="numbered-list" start="3"><li>A usually binary assessment of either <mark class="highlight-yellow">Relevant</mark> or <mark class="highlight-yellow">Non-relevant</mark> for each information needs and each document</li></ol><ul id="f6a6fcfb-6930-45e6-972b-bd9b2e4e2f3c" class="bulleted-list"><li><mark class="highlight-red"><strong>Issue:</strong></mark> cost of getting these relevance judgments</li></ul><ul id="75569a70-82b0-4bfe-b08b-924f61a9f2a2" class="bulleted-list"><li><mark class="highlight-yellow">crowd-sourcing</mark> relevance judgments → <mark class="highlight-red">high</mark> <mark class="highlight-red">variance</mark> in results.</li></ul></li></ul><ul id="98bc1e0c-a810-41e9-a96f-266f61f85257" class="bulleted-list"><li><mark class="highlight-orange"><strong>*</strong></mark> <mark class="highlight-yellow">user need</mark> is translated into a <mark class="highlight-yellow">query</mark> → Relevance is assessed relative to the <mark class="highlight-yellow">user need</mark>, <em>not</em> the <mark class="highlight-yellow">query</mark></li></ul><ul id="7f0b9c92-ebe0-4a5f-bade-7f15c31793d2" class="bulleted-list"><li><mark class="highlight-orange"><strong>Precision:</strong></mark> <mark class="highlight-yellow">P(relevant|retrieved)
</mark>fraction of retrieved docs that are relevant
P = tp / (tp + fp)</li></ul><ul id="879daaaa-117c-4c88-b3f3-62aed8414f61" class="bulleted-list"><li><mark class="highlight-orange"><strong>Recall:</strong></mark> <mark class="highlight-yellow">P(retrieved|relevant)</mark>
fraction of relevant docs that are retrieved
R = tp / (tp + fn)
<mark class="highlight-red"><strong>→</strong></mark> <mark class="highlight-red">Retrieving all</mark> docs for all queries
Recall is a non-decreasing function of the number of docs retrieved.</li></ul><ul id="9d603f29-2972-4769-b965-92a81ef9cb83" class="bulleted-list"><li><mark class="highlight-orange"><strong>Accuracy:</strong></mark> fraction of classifications that are correct
(tp + <mark class="highlight-red"><strong>tn</strong></mark>) / (tp + fp + fn + <mark class="highlight-red"><strong>tn</strong></mark>)<p id="00e65f6d-c2b1-4022-8a48-fb1f71b6bfc6" class=""><strong><mark class="highlight-red">→</mark></strong> <mark class="highlight-red">Retrieving nothing</mark>: many more non-relevant docs than relevant ones</p></li></ul><ul id="9d582365-aaa1-4fd5-b479-1072815695b1" class="bulleted-list"><li><mark class="highlight-orange"><strong>F measure:</strong></mark> weighted harmonic mean of P and R</li></ul><div id="de2e8912-b782-432c-a893-e4d53de563f6" class="column-list"><div id="72369f94-ce40-40cf-8fb3-72a7d77c7c25" style="width:56.25%" class="column"><figure id="d661d0e9-7042-4882-a585-a347ba0a346f" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>α</mi><mfrac><mn>1</mn><mi>P</mi></mfrac><mo>+</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo>)</mo><mfrac><mn>1</mn><mi>R</mi></mfrac></mrow></mfrac><mo>=</mo><mfrac><mrow><mo>(</mo><msup><mi>β</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo>)</mo><mi>P</mi><mi>R</mi></mrow><mrow><msup><mi>β</mi><mn>2</mn></msup><mi>P</mi><mo>+</mo><mi>R</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">F = \frac{1}{\alpha \frac{1}{P} + (1 - \alpha) \frac{1}{R}} = \frac{(\beta^2 + 1)PR}{\beta^2P + R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.401548em;vertical-align:-1.080108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.2648919999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.080108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.371548em;vertical-align:-0.8804400000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.491108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div><div id="341e5f9e-3482-455f-b0a9-d932a3012ff4" style="width:43.75%" class="column"><figure id="8dfdd076-ae31-4f8b-a664-c30578251091" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>β</mi><mn>2</mn></msup><mo>=</mo><mfrac><mrow><mn>1</mn><mo>−</mo><mi>α</mi></mrow><mi>α</mi></mfrac></mrow><annotation encoding="application/x-tex">\beta^2 = \frac{1 - \alpha}{\alpha}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0585479999999998em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div></div><ul id="a657cf5d-1bf9-4ae6-baf0-e2633138a4e6" class="bulleted-list"><li><strong><mark class="highlight-orange">Balanced F: </mark></strong>harmonic mean of P and R (smooth minimum)</li></ul><div id="1c5fdd42-4cfb-417a-9e0a-428d12671fe4" class="column-list"><div id="d4d676c4-1591-42b4-9a1d-d703e3bb7db0" style="width:33.333333333333336%" class="column"><figure id="f97ad2d2-33e7-4d17-9742-b20efbf5f417" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>=</mo><mfrac><mrow><mn>2</mn><mi>P</mi><mi>R</mi></mrow><mrow><mi>P</mi><mo>+</mo><mi>R</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">F = \frac{2PR}{P + R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.1296600000000003em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><p id="01a265a5-70c5-4f66-8238-c0e4e8a57c29" class="">
</p></div><div id="bf03ff81-9003-45b9-8f48-66009bf2c5ff" style="width:33.333333333333336%" class="column"><figure id="6ca932b8-7ff0-4271-979f-caa281d59613" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mn>1</mn><mi>F</mi></mfrac><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>(</mo><mfrac><mn>1</mn><mi>P</mi></mfrac><mo>+</mo><mfrac><mn>1</mn><mi>R</mi></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">\frac{1}{F} = \frac{1}{2}(\frac{1}{P} + \frac{1}{R})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></div></figure></div><div id="ef0d2f9d-b636-488f-8f69-8a657860a7ef" style="width:33.33333333333333%" class="column"><figure id="d448bbb8-6c40-4510-a1e0-fff9d6350d2c" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>α</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\beta = 1 , \alpha = \frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div></div><h3 id="89047450-0b04-47f5-a78a-ed17212ccc3f" class=""><mark class="highlight-red">Binary Relevence</mark></h3><ul id="c958351b-788d-4e98-a026-b3beb8d07481" class="bulleted-list"><li><mark class="highlight-orange"><strong>Precision-Recall curve: </strong></mark>Taking various numbers of top returned docs (recall levels)
compute the set measure for each “prefix”: the top 1, top 2, top 3, top 4, and etc results.</li></ul><ul id="7ad39402-2694-4b36-8d7d-8eea96bdbdda" class="bulleted-list"><li>if the (k + 1)th document retrieved is nonrelevant then recall is the same as for the top k documents, but precision has dropped. If it is relevant, then both precision and recall increase, and the curve jags up and to the right.</li></ul><ul id="7a2748ce-6255-4115-8b1d-4fcc0ffcfb51" class="bulleted-list"><li>the <mark class="highlight-orange">interpolated precision p_interp</mark> at a certain recall level r is defined as the highest precision found for any recall level r′ ≥ r.</li></ul><figure id="76eba246-9f77-4a17-adc2-444cec0bce7d" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_6.58.10_PM.png"><img style="width:576px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_6.58.10_PM.png"/></a></figure><ul id="15aefc0f-8916-4bb6-8fa0-8f769be1e152" class="bulleted-list"><li><mark class="highlight-orange"><strong>11-point interpolated average precision: </strong></mark>For each information need, the interpolated precision is measured at the 11 recall levels of 0.0, 0.1, 0.2, . . . , 1.0.</li></ul><ul id="45e02aa2-0ce9-4987-b20f-dfdd69f49e89" class="bulleted-list"><li>For each recall level, we then calculate the arithmetic mean of the interpolated precision at that recall level for each information need in the test collection.</li></ul><figure id="2c35bdf3-0122-4676-86b5-621059203cdf" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_7.00.05_PM.png"><img style="width:528px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_7.00.05_PM.png"/></a></figure><ul id="30680fbc-0870-4b1e-b820-8686a14fea22" class="bulleted-list"><li><mark class="highlight-orange"><strong>Precision-at-k: </strong></mark>Precision of <mark class="highlight-yellow">top k</mark> results, arbitrary parameter of k.</li></ul><ul id="898108df-5017-4b97-b1e5-e787a00787e7" class="bulleted-list"><li><mark class="highlight-orange"><strong>Average precision:</strong></mark> Average precision = average of P@K (for K1, K2, ... KR) <mark class="highlight-yellow">→ rank position of each relevant doc</mark></li></ul><ul id="9457447d-1a1e-4ce5-bee1-5865505f6776" class="bulleted-list"><li><mark class="highlight-orange"><strong>Mean Average Precision (MAP):</strong></mark> MAP is Average Precision across multiple queries/rankings.<figure id="67f4841c-f8ee-4e4e-9b0b-0e91f8a35293" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_7.07.22_PM.png"><img style="width:432px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_7.07.22_PM.png"/></a></figure></li></ul><ul id="96cb5439-5c0f-4d1b-a55e-060b1f29de36" class="bulleted-list"><li>the average precision approximates the <mark class="highlight-yellow">area under the uninterpolated precision-recall curve</mark>, and so the MAP is roughly the average area under the precision-recall curve for a set of queries.</li></ul><ul id="a427bfb6-33cd-4ecf-b708-4b6dd840343e" class="bulleted-list"><li>normally more agreement in MAP for an individual information need across systems than for MAP scores for different information needs for the same system.</li></ul><ul id="0a4619e9-220b-4d89-bde2-f44dd09354c5" class="bulleted-list"><li>MAP assumes user is interested in finding many relevant docs for each query.</li></ul><figure id="8ef3fd22-1a75-4e96-a285-d5f44fdbcfa5" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_1.52.14_PM.png"><img style="width:672px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_1.52.14_PM.png"/></a></figure><ul id="e99a60ab-5072-41b5-8424-1ceb3b47173a" class="bulleted-list"><li><mark class="highlight-orange"><strong>Mean Reciprocal Rank (MRR):</strong></mark> Consider rank position, K, of <mark class="highlight-yellow">first relevant doc</mark>
<mark class="highlight-yellow">Reciprocal Rank score = 1/k
</mark>MRR is the mean RR across multiple queries<figure id="c8844f2b-93e0-4191-97d9-723fe8dfd99f" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_7.07.00_PM.png"><img style="width:288px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_7.07.00_PM.png"/></a></figure></li></ul><h3 id="27008cfe-9d50-4f3a-8fb4-d844bda0c023" class=""><mark class="highlight-red">Multiple levels of relevance</mark></h3><ul id="c0603781-cd5e-4185-a004-1e7762552824" class="bulleted-list"><li><mark class="highlight-orange"><strong>Discounted Cumulative Gain (DCG): </strong></mark>two assumptions:<ol id="4d569520-b73f-47e6-8766-b523677b5960" class="numbered-list" start="1"><li><mark class="highlight-yellow">Highly relevant</mark> docs are <mark class="highlight-yellow">more useful</mark></li></ol><ol id="21a22418-48c6-448f-baaa-c85d25ad8fb7" class="numbered-list" start="2"><li>The lower ranked position of a relevant doc, the less useful it is for the user</li></ol></li></ul><ul id="f5eaf025-d9a3-4d93-ac4b-05e7d23792dc" class="bulleted-list"><li>Typical discount is <mark class="highlight-yellow">1/log(rank)</mark></li></ul><ul id="0bba6185-3846-4b05-9f74-2f7d23a3e077" class="bulleted-list"><li><mark class="highlight-yellow">CG</mark> = r1+r2+...rn</li></ul><ul id="7e071f67-a477-47ef-b075-b026d8d55016" class="bulleted-list"><li><mark class="highlight-yellow">DCG</mark> = r1 + r2/log2 + r3/log3 + ... rn/logn
(any base)</li></ul><ul id="ab4bd0d8-02a9-463a-a676-9b0781c68bb0" class="bulleted-list"><li>DCG is the total gain accumulated at a particular rank p:</li></ul><div id="c4d17143-b920-4739-8f00-15767d9ae331" class="column-list"><div id="5db03e1c-5f8f-4100-93f1-6f50818516e1" style="width:50%" class="column"><figure id="609dc81e-0f40-4d2c-9a55-98102f531de6" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mi>C</mi><msub><mi>G</mi><mi>p</mi></msub><mo>=</mo><mi>r</mi><mi>e</mi><msub><mi>l</mi><mn>1</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>2</mn></mrow><mi>p</mi></munderover><mfrac><mrow><mi>r</mi><mi>e</mi><msub><mi>l</mi><mi>i</mi></msub></mrow><mrow><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>i</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">DCG_p = rel_1 + \sum_{i = 2}^p \frac{rel_i}{log_2i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9761740000000003em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6985050000000004em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">2</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.347113em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">i</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div><div id="1c382024-3faf-4ed0-ac82-ee5f8e447a3b" style="width:50%" class="column"><figure id="cb8c1aa1-9af7-48b6-8f5f-42b0e5d02c74" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mi>C</mi><msub><mi>G</mi><mi>p</mi></msub><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>p</mi></munderover><mfrac><mrow><msup><mn>2</mn><mrow><mi>r</mi><mi>e</mi><msub><mi>l</mi><mi>i</mi></msub></mrow></msup><mo>−</mo><mn>1</mn></mrow><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo>(</mo><mn>1</mn><mo>+</mo><mi>i</mi><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">DCG_p = \sum_{i=1}^p \frac{2^{rel_i} - 1}{log(1 + i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9761740000000003em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6985050000000004em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.347113em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.526108em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">e</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.01968em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div></div><ul id="1eba1702-8cb8-4885-8fd2-deec69609b06" class="bulleted-list"><li><mark class="highlight-orange"><strong>NDCG(q,k): </strong></mark>normalizes DCG at rank k by the DCG value at rank k of the ideal ranking.</li></ul><ul id="d38db388-9cb7-43f1-a6d8-806c7c23b3b6" class="bulleted-list"><li>Normalization useful for contrasting queries with varying numbers of relevant results.</li></ul><ul id="8bb8ad61-d3c6-4b1a-ac46-6f8600c0811a" class="bulleted-list"><li>NDCG ≤ 1 at any rank position.</li></ul><figure id="322ac5c3-c8da-4411-ae4d-03500c3d0d8d" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_8.44.43_PM.png"><img style="width:576px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_8.44.43_PM.png"/></a></figure><h3 id="958b2a6f-0a03-4e72-bba8-130069be8c99" class=""><mark class="highlight-red">Using User Clicks</mark></h3><ul id="506bf402-77f5-4104-aa7d-a2e4bf41faf7" class="bulleted-list"><li><mark class="highlight-orange"><strong>Human judgments are:</strong></mark><ul id="7ca3f82f-1a45-46d4-ad9c-dcb21e66afae" class="bulleted-list"><li><mark class="highlight-yellow">Expensive</mark></li></ul><ul id="f63ce925-538c-4b06-a116-28c9e0ac7998" class="bulleted-list"><li><mark class="highlight-yellow">Inconsistent</mark> (between raters, over time)</li></ul><ul id="04acd778-45a0-45fe-93ee-368dd5e09cb2" class="bulleted-list"><li><mark class="highlight-yellow">Decay in value</mark> as documents/query mix evolves</li></ul><ul id="c2d321be-5634-48e6-a1c2-e100e7a97276" class="bulleted-list"><li><mark class="highlight-yellow">Not</mark> always <mark class="highlight-yellow">representative</mark> of “real users”</li></ul></li></ul><ul id="d5b29ff7-8a91-4373-a91f-1e24c63d23b3" class="bulleted-list"><li>Strong <mark class="highlight-yellow">position bias</mark>, so absolute click rates unreliable</li></ul><ul id="592098cc-68b9-41bd-819f-59d669d3de2a" class="bulleted-list"><li><mark class="highlight-orange"><strong>Applications of click models:</strong></mark><ul id="b2af12b0-53a4-4735-927e-7881268bcc77" class="bulleted-list"><li><mark class="highlight-yellow">Optimizing</mark> the retrieval function</li></ul><ul id="d95a7728-b1fa-42ac-9bf1-b75db7f30f69" class="bulleted-list"><li>Online <mark class="highlight-yellow">advertising</mark></li></ul><ul id="af611026-cf58-4a2e-a0cd-edd2e6d8d1f9" class="bulleted-list"><li>Search engine <mark class="highlight-yellow">evaluation</mark></li></ul><ul id="6af92d0e-7d36-4da5-a43c-42112ccb43e0" class="bulleted-list"><li>User <mark class="highlight-yellow">behavior</mark> <mark class="highlight-yellow">analysis</mark></li></ul></li></ul><ul id="6af327c6-a92f-43ba-8fa7-c817ee55a11a" class="bulleted-list"><li><mark class="highlight-yellow">Clicked &gt; Skipped Above
</mark>Pairs of the form: DocA <mark class="highlight-yellow">better than</mark> DocB for a query Doesn’t mean that DocA <mark class="highlight-yellow">relevant</mark> to query</li></ul><ul id="f5ea40c7-f8bd-47ef-9292-ebe1ad415ab6" class="bulleted-list"><li><mark class="highlight-orange"><strong>A/B testing:</strong></mark> Divert a small proportion of traffic (e.g., 1%) to the new system that includes the innovation (<mark class="highlight-yellow">full page / interleaved</mark> experiment)</li></ul><ul id="9fd65884-25b0-465d-bb44-d0839c1a074c" class="bulleted-list"><li><mark class="highlight-orange"><strong>Interleaved ranking:</strong></mark> present interleaved ranking to users, <mark class="highlight-yellow">start randomly</mark> with ranking A or ranking B, <mark class="highlight-yellow">count clicks</mark> on results from A versus results from B, <mark class="highlight-yellow">better</mark> ranking will (on average) get <mark class="highlight-yellow">more</mark> <mark class="highlight-yellow">clicks</mark>.</li></ul><ul id="32d0416f-682b-40d2-a1e7-05e3b8e132e5" class="bulleted-list"><li><mark class="highlight-red"><strong>User Behavior:</strong></mark><ul id="9d07977a-0e7e-4a60-a2a0-2056e3524e5b" class="bulleted-list"><li>can be very <mark class="highlight-yellow">noisy</mark></li></ul><ul id="1a3422ec-0a71-4592-ba2f-fc6eaec5593c" class="bulleted-list"><li><mark class="highlight-yellow">Interpreting</mark> can be tricky</li></ul><ul id="2ffeca4c-f5ee-4efa-b1c0-e8342c96f326" class="bulleted-list"><li><mark class="highlight-yellow">Spam</mark> can be a significant problem</li></ul><ul id="f6a50d8c-5a22-42af-9399-957a2277be40" class="bulleted-list"><li><mark class="highlight-yellow">Not all queries</mark> will have user behavior</li></ul></li></ul><ul id="23e881e2-1aca-4d9b-90aa-83d4c6c318e8" class="bulleted-list"><li><mark class="highlight-orange"><strong>Benchmarks consist of:</strong></mark><ul id="63572a5c-08da-4a86-b14b-c6c9881feb6f" class="bulleted-list"><li><mark class="highlight-yellow">Document collection</mark></li></ul><ul id="beda751c-3aef-4667-915a-93109049e16f" class="bulleted-list"><li><mark class="highlight-yellow">Query set</mark></li></ul><ul id="423e8320-94d8-4336-8739-3f2bec5de309" class="bulleted-list"><li><mark class="highlight-yellow">Assessment methodology</mark>: can use raters, user clicks, or a combination.</li></ul></li></ul><h3 id="a2b6830d-3184-4625-abfd-6a51b699a66e" class=""><mark class="highlight-red">Other factors than relevance</mark></h3><ul id="6b843a21-9b02-4795-a512-79884fe107cd" class="bulleted-list"><li><mark class="highlight-orange"><strong>Snippet (summery):</strong></mark> a short summary of the document that is designed so as to allow the user to decide its relevance (<mark class="highlight-yellow">static</mark> / <mark class="highlight-yellow">dynamic</mark>)</li></ul><ul id="43dfe6ff-9f26-4752-b62e-158a1a438a08" class="bulleted-list"><li><mark class="highlight-orange"><strong>Static summaries:</strong></mark> <ul id="e54fdaf4-8a2f-4f9d-9cb2-b681e03338eb" class="bulleted-list"><li><mark class="highlight-orange">Simplest heuristic:</mark> title &amp; the first 50 words of the doc</li></ul><ul id="ec07f7e6-07e4-437e-a1cd-10a50179ac1f" class="bulleted-list"><li><mark class="highlight-orange">More sophisticated:</mark> extract from each doc a set of “key” sentences</li></ul><ul id="b074d128-4a9f-4a1b-af53-c040d83978c7" class="bulleted-list"><li><mark class="highlight-orange">Most sophisticated:</mark> NLP used to synthesize a summary</li></ul></li></ul><ul id="0fa73de0-8aa1-4fa9-971d-053a066a9f3d" class="bulleted-list"><li><strong><mark class="highlight-orange">Dynamic summaries:</mark></strong> Present one or more “<mark class="highlight-yellow">windows</mark>” within the doc that contain several of the query terms (Requires high disk space)<ul id="af8804a0-9350-46b3-ab9c-74e52450533c" class="bulleted-list"><li><mark class="highlight-yellow">Find small windows</mark> in doc that contain query terms (requires fast window lookup in a doc cache)</li></ul><ul id="d992028e-a8dd-45e5-a40c-35a40c00fc76" class="bulleted-list"><li><mark class="highlight-yellow">Score</mark> each window w.r.t query</li></ul></li></ul><hr id="bd2045c0-d1fa-4a26-9f58-1ce6d738e0b1"/><h2 id="087d0b3c-bd06-4afd-89bb-8c51c6ff9a6a" class=""><mark class="highlight-pink">9. Probabilistic IR</mark></h2><hr id="3c7b038a-8315-45d0-a2a7-63cee33ec99a"/><ul id="60065c26-eca2-4190-8805-0949eb5e32c8" class="bulleted-list"><li><mark class="highlight-orange"><strong>Doc ranking:</strong></mark> rank by probability of relevance of the doc w.r.t info need.
𝑃(𝑅 = 1|𝑑𝑜𝑐𝑖, 𝑞𝑢𝑒𝑟𝑦)</li></ul><h3 id="fd50418f-ba70-4e55-bf7d-615d16850597" class=""><mark class="highlight-red">Probability Ranking Principle (PRP)</mark></h3><figure id="1d89026e-789d-4ec5-8223-c324af662025" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.41.54_PM.png"><img style="width:528px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.41.54_PM.png"/></a></figure><figure id="df7066dc-1127-48f6-911a-9c084c977c04" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_9.56.33_PM.png"><img style="width:672px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_9.56.33_PM.png"/></a></figure><ul id="190a0d7f-9cfd-4e2a-900b-ddf10afd1750" class="bulleted-list"><li><mark class="highlight-orange"><strong>Binary Independence Model:</strong></mark> <ul id="cf158791-56f1-483f-8038-72c96b9e582a" class="bulleted-list"><li><mark class="highlight-orange">Binary = Boolean:</mark> docs are represented as binary incidence vectors of terms.
X = [𝑥1 𝑥2 ... 𝑥m], xi = 1 if term i in X</li></ul><ul id="7a3c8268-2f4f-4843-8c2a-f3bb1f6640a2" class="bulleted-list"><li><mark class="highlight-orange">Independence:</mark> terms occur in docs independently<figure id="628a020b-d186-4aa9-81a9-f9308913ea7b" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.47.27_PM.png"><img style="width:1398px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.47.27_PM.png"/></a></figure><figure id="c014316c-c36d-4cb1-8f7b-9db9465e708a" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.48.01_PM.png"><img style="width:1978px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.48.01_PM.png"/></a></figure><figure id="326db263-8677-4b49-a276-356147f3a8f1" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.50.44_PM.png"><img style="width:1816px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.50.44_PM.png"/></a></figure></li></ul><ul id="364aaf81-d22f-4278-a91b-74eb55434ef3" class="bulleted-list"><li>assumption that terms not occurring in the query are equally likely to occur in relevant and non-relevant documents: that is, <mark class="highlight-yellow">if qt = 0 then pt = ut</mark>.<figure id="b8bbc6e0-5121-4c6e-983d-36e39bae68e8" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.52.25_PM.png"><img style="width:2054px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.52.25_PM.png"/></a></figure></li></ul><ul id="dcc2adae-9060-4d8e-bb72-416e5f9ccdea" class="bulleted-list"><li><mark class="highlight-orange"><strong>Retrieval Status Value: </strong></mark>The resulting quantity used for ranking<figure id="a6140275-392c-4802-bb08-ff6ed11e88b7" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_10.10.07_PM.png"><img style="width:528px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-04_at_10.10.07_PM.png"/></a></figure><figure id="8b638a10-84c0-4eea-b411-dc3afdd8a682" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.57.36_PM.png"><img style="width:2138px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_8.57.36_PM.png"/></a></figure></li></ul><ul id="5b025196-b500-45a2-9071-03ef6aea82b1" class="bulleted-list"><li>Estimating RSV coefficients in theory<figure id="f4afcfd5-e9d7-43f0-8448-6e164484f472" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.22.52_PM.png"><img style="width:2190px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.22.52_PM.png"/></a></figure><figure id="643ff77f-9b62-4e1a-96b0-8f76f926a234" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.23.15_PM.png"><img style="width:1926px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.23.15_PM.png"/></a></figure></li></ul></li></ul><ul id="1c978a6b-4d61-43a3-91c8-d1ad47889104" class="bulleted-list"><li><mark class="highlight-orange"><strong>Probabilistic Relevance Feedback:</strong></mark><figure id="29e77532-f351-42ac-a7e8-0f715b6cd5a7" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.23.40_PM.png"><img style="width:2058px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.23.40_PM.png"/></a></figure><figure id="7c72f880-d33d-48c8-958b-36396c6a74a8" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.23.57_PM.png"><img style="width:2000px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.23.57_PM.png"/></a></figure></li></ul><ul id="4b08460f-c973-41f6-b260-2ed535b0e2e3" class="bulleted-list"><li><mark class="highlight-orange"><strong>Iteratively estimating 𝑝𝑖 (Pseudo-relevance feedback)</strong></mark><figure id="848a571f-5cd1-45a1-a442-e2b0cf3443a8" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.24.13_PM.png"><img style="width:1686px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.24.13_PM.png"/></a></figure></li></ul><hr id="871d958d-b9f5-4cdb-8c33-e6a09dee502a"/><h2 id="267d76c9-58e9-4852-b6ad-44e0037d902f" class=""><mark class="highlight-pink">10. Language Models</mark></h2><hr id="f8a892fd-e6d5-43ec-8212-26523c71f814"/><ul id="01b31ab0-22db-45cb-961a-b50bdde463a3" class="bulleted-list"><li>LM approach assumes that docs and query are objects of the same type</li></ul><ul id="e79452a3-3c14-42ab-ba2b-22a551065757" class="bulleted-list"><li><mark class="highlight-orange"><strong>Stochastic language models:</strong></mark><ul id="c7c9b0c5-e0cc-4ebf-adbd-5950e60e764e" class="bulleted-list"><li>Unigram</li></ul><ul id="bea3fcd2-71fe-42b5-b394-4ff416f6af41" class="bulleted-list"><li>Bigram</li></ul><figure id="a729d0ef-2a46-4f5d-b1f3-00caf7049c28" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.27.59_PM.png"><img style="width:528px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.27.59_PM.png"/></a></figure></li></ul><ul id="608d0837-2e11-46c5-af54-87cddfd35c55" class="bulleted-list"><li><mark class="highlight-orange"><strong>Probabilistic language models in IR:</strong></mark><ul id="132a3546-e21a-40a9-bb9b-738a582fce2a" class="bulleted-list"><li><mark class="highlight-yellow">Rank</mark> doc 𝑑 based on <mark class="highlight-yellow">𝑃(𝑑|𝑞)</mark>: 𝑃(𝑑|𝑞) = 𝑃(𝑞|𝑑)×𝑃(𝑑) /𝑃(𝑞)</li></ul><ul id="5b3d0b2e-eeec-4460-a2fc-14f9e9259c37" class="bulleted-list"><li><mark class="highlight-yellow">𝑃(𝑞)</mark> is the <mark class="highlight-yellow">same for all docs</mark>, so ignore</li></ul><ul id="b33be79d-f608-4586-9a6d-71b20089806a" class="bulleted-list"><li><mark class="highlight-yellow">𝑃(𝑑)</mark> [the prior] is often treated as the <mark class="highlight-yellow">same for all 𝑑</mark> (could use authority, length, genre)</li></ul><ul id="eed8a9dc-593e-402f-a660-6c9f5ebccf2b" class="bulleted-list"><li><mark class="highlight-yellow">𝑃(𝑞|𝑑)</mark> is the <mark class="highlight-yellow">probability of 𝑞 given 𝑑’s model</mark></li></ul><ul id="7133c554-be38-4cb2-920a-eb1121823c8c" class="bulleted-list"><li>Ranking formula: <mark class="highlight-yellow">𝑃(𝑑)𝑃(𝑞|M𝑑)</mark></li></ul></li></ul><ul id="61c242da-5520-416f-a50a-ec743ea8a3ae" class="bulleted-list"><li><mark class="highlight-orange"><strong>Language Modeling Approaches:</strong></mark> Attempt to <mark class="highlight-yellow">model</mark> <mark class="highlight-yellow">query generation process</mark></li></ul><ul id="88f482da-0195-4b7c-ae01-f3aa1e0a4245" class="bulleted-list"><li>Docs are ranked by <mark class="highlight-yellow">the probability that a query would be observed as a random sample from the doc model.</mark></li></ul><ul id="7bac0926-3a4d-4291-9e85-4a4a978207f1" class="bulleted-list"><li>Multinomial approach:</li></ul><div id="d9a5f297-9de7-4c09-bf25-aa48e667f386" class="column-list"><div id="bef7e4b7-71b6-4e13-a8a4-1c8afaf1439a" style="width:50%" class="column"><figure id="1aa8d0ba-b1cf-4792-b1e5-7ae20dc26b53" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>q</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><mo>)</mo><mo>=</mo><msub><mi>K</mi><mi>q</mi></msub><munder><mo>∏</mo><mrow><mi>t</mi><mo>∈</mo><mi>V</mi></mrow></munder><mi>P</mi><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><msup><mo>)</mo><mrow><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>q</mi></mrow></msub></mrow></msup></mrow><annotation encoding="application/x-tex">P(q|M_d) = K_q \prod_{t \in V} P(t|M_d)^{tf_{t,q}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">V</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div></figure></div><div id="edf7146c-2625-428f-a077-aab2dee28226" style="width:50%" class="column"><figure id="8dd23839-9998-4352-b0b2-203c3cb43ec7" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>q</mi></msub><mo>=</mo><mfrac><mrow><msub><mi>L</mi><mi>q</mi></msub><mo>!</mo></mrow><mrow><mi>t</mi><msub><mi>f</mi><mrow><mn>1</mn><mo separator="true">,</mo><mi>q</mi></mrow></msub><mo>!</mo><mo>×</mo><mo>⋯</mo><mo>×</mo><mi>t</mi><msub><mi>f</mi><mrow><mi>M</mi><mo separator="true">,</mo><mi>q</mi></mrow></msub><mo>!</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">K_q = \frac{L_q!}{tf_{1,q}! \times \dots \times tf_{M,q}!}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.343548em;vertical-align:-0.972108em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">!</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">!</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">!</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.972108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div></div><div id="778e39bc-27cf-48ee-8037-cb0b5505b354" class="column-list"><div id="43d1db22-e6aa-439b-af69-2a7b498f002e" style="width:50%" class="column"><figure id="55e10e94-d4a3-482b-adbd-2ebbe841d3d2" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><mo>)</mo><mo>=</mo><mfrac><mrow><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>d</mi></mrow></msub></mrow><msub><mi>L</mi><mi>d</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">\hat{p} (t|M_d) = \frac{tf_{t, d}}{L_d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.20744em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure></div><div id="b034d594-b5d6-44a9-b119-762ef15ad00c" style="width:50%" class="column"><figure id="f9adae79-f540-493a-bcc0-f9c5a65208bf" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>q</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><mo>)</mo><mo>∝</mo><munder><mo>∏</mo><mrow><mi>t</mi><mo>∈</mo><mi>q</mi></mrow></munder><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><msup><mo>)</mo><mrow><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>q</mi></mrow></msub></mrow></msup></mrow><annotation encoding="application/x-tex">\hat{p} (q|M_d) \propto \prod_{t \in q} \hat{p}(t|M_d)^{tf_{t, q}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4361180000000004em;vertical-align:-1.386113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.8999949999999999em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.386113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div></figure></div></div><ul id="bc1cb9bf-c263-47e7-8e8b-3574b4843a9d" class="bulleted-list"><li>𝐿d: total number of tokens in document d</li></ul><ul id="2eb08713-d8ce-4f2b-8899-99e27170381a" class="bulleted-list"><li>Infer a language model for each doc.</li></ul><ul id="9af5ef69-3f52-480a-858b-7afcb6a90fc4" class="bulleted-list"><li>Estimate the probability of generating the query according to each of these models.</li></ul><ul id="393b633c-bb3c-4834-b839-83203ec7a739" class="bulleted-list"><li>Rank the docs according to these probabilities.</li></ul><ul id="12e37221-82cb-463b-8f26-5181ab82a29f" class="bulleted-list"><li><mark class="highlight-red"><strong>Insufficient data:</strong></mark><ul id="9135ef1c-164c-49e9-ac9d-8a8b1eb7a6d4" class="bulleted-list"><li><mark class="highlight-orange"><strong>Zero probability:</strong></mark> May not wish to assign a probability of zero to a doc missing one or  more of the query terms.</li></ul><ul id="9860f2eb-48cd-478d-bbe0-e36aa939677d" class="bulleted-list"><li><mark class="highlight-orange"><strong>Poor estimation:</strong></mark> occurring words may also be badly estimated (once, overestimated)</li></ul></li></ul><ul id="2cdb94e7-e4b7-4d12-af98-555f5d94eb79" class="bulleted-list"><li><mark class="highlight-teal"><strong>Solution:</strong></mark><ul id="0a173af5-6c28-4576-8c6f-eaae95f96d95" class="bulleted-list"><li><mark class="highlight-orange"><strong>Smooth probabilities:</strong></mark> discount nonzero probabilities, give some probability mass to unseen things.</li></ul><figure id="ed4fba6d-35ee-47e2-8ff0-02b8a048ffc5" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>d</mi></mrow></msub><mo>=</mo><mn>0</mn><mo>⇒</mo><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><mo>)</mo><mo>&lt;</mo><mfrac><mrow><mi>c</mi><msub><mi>f</mi><mi>t</mi></msub></mrow><mi>T</mi></mfrac><mo>=</mo><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>c</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">tf_{t, d} = 0 \Rightarrow \hat{p}(t|M_d) &lt; \frac{cf_t}{T} = \hat{p}(t|M_c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.0574399999999997em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></figure><ul id="78de2f46-3613-4531-a9a6-1eb3aeaf2ce1" class="bulleted-list"><li><mark class="highlight-orange"><strong>Bayesian smoothing:</strong></mark></li></ul><figure id="91e7a94e-efc0-45e0-952e-cb07311b0dad" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>d</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>d</mi></mrow></msub><mo>+</mo><mi>α</mi><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>c</mi></msub><mo>)</mo></mrow><mrow><msub><mi>L</mi><mi>d</mi></msub><mo>+</mo><mi>α</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\hat{p}(t|d) = \frac{tf_{t,d} + \alpha\hat{p}(t|M_c)}{L_d + \alpha}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.263em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><ul id="544d2269-3351-4409-bef3-fb18dc94996b" class="bulleted-list"><li><strong><mark class="highlight-orange">Linear interpolation:</mark></strong> Mixture model
<mark class="highlight-yellow">high lambda: </mark>suitable for <mark class="highlight-yellow">short</mark> queries
<mark class="highlight-yellow">low: long</mark> query</li></ul><figure id="e8d56392-6cc1-450c-8f23-c456bd6e536a" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>d</mi><mo>)</mo><mo>=</mo><mi>λ</mi><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><mo>)</mo><mo>+</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>λ</mi><mo>)</mo><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>c</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\hat{p}(t|d) = \lambda\hat{p}(t|M_d) + (1 - \lambda)\hat{p}(t|M_c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">λ</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">λ</span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></figure><figure id="68076eb2-ea87-4204-9689-b53886d5913b" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>d</mi><mo>)</mo><mo>=</mo><mi>λ</mi><mfrac><mrow><mi>t</mi><msub><mi>f</mi><mrow><mi>t</mi><mo separator="true">,</mo><mi>d</mi></mrow></msub></mrow><msub><mi>L</mi><mi>d</mi></msub></mfrac><mo>+</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>λ</mi><mo>)</mo><mfrac><mrow><mi>c</mi><msub><mi>f</mi><mi>t</mi></msub></mrow><mi>T</mi></mfrac></mrow><annotation encoding="application/x-tex">\hat{p}(t|d) = \lambda\frac{tf_{t,d}}{L_d} + (1 - \lambda)\frac{cf_t}{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.20744em;vertical-align:-0.8360000000000001em;"></span><span class="mord mathdefault">λ</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.0574399999999997em;vertical-align:-0.686em;"></span><span class="mord mathdefault">λ</span><span class="mclose">)</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></figure><figure id="00eb1184-93fa-4a9a-8592-f04fe3720a5f" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>q</mi><mi mathvariant="normal">∣</mi><mi>d</mi><mo>)</mo><mo>=</mo><munder><mo>∏</mo><mrow><mi>t</mi><mo>∈</mo><mi>q</mi></mrow></munder><mi>λ</mi><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>d</mi></msub><mo>)</mo><mo>+</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>λ</mi><mo>)</mo><mover accent="true"><mi>p</mi><mo>^</mo></mover><mo>(</mo><mi>t</mi><mi mathvariant="normal">∣</mi><msub><mi>M</mi><mi>c</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\hat{p}(q|d) = \prod_{t \in q}\lambda\hat{p}(t|M_d) + (1 - \lambda)\hat{p}(t|M_c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4361180000000004em;vertical-align:-1.386113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000003em;"><span style="top:-1.8999949999999999em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.386113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">λ</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">λ</span><span class="mclose">)</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">p</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;">^</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">t</span><span class="mord">∣</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div></figure><figure id="8b031847-4302-4d31-89b5-e9defb0ce467" class="image"><a href="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.36.34_PM.png"><img style="width:1878px" src="Midterm%20Notes%20e8bfeab155e6401c8f0ac1d981140b3b/Screen_Shot_1399-03-08_at_9.36.34_PM.png"/></a></figure></li></ul><ul id="4c1d55fd-a2b1-43cb-a155-d81fc315a652" class="bulleted-list"><li><mark class="highlight-red"><strong>problems: </strong></mark><ul id="e9a9f460-6b4d-4ad4-9cf3-8fca5c9c69bb" class="bulleted-list"><li>Assumption of equivalence between doc and information problem representation is unrealistic</li></ul><ul id="474d110f-ca2e-4649-8b0c-da49bb679cc2" class="bulleted-list"><li>Very simple models of language</li></ul><ul id="6c49b331-5272-46de-8428-6b637cd28453" class="bulleted-list"><li>Relevance feedback is difficult to integrate</li></ul><ul id="1927413e-8283-4899-b513-ab60120e376e" class="bulleted-list"><li>Can’t easily accommodate phrases, passages, Boolean operators</li></ul><p id="b3a893b2-f2f5-4c6f-a4d3-2b61daebb24a" class="">
</p></li></ul></div></article></body></html>